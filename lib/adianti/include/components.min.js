function tpassword_start(a){$(`#${a} button`).click(function(){var b=$(this).find("i"),c=$(this).prev();b.toggleClass("fa-eye-slash");b.toggleClass("fa-eye");c.attr("type")=="text"?c.attr("type","password"):c.attr("type","text")})}
function tpassword_enable_strong_validation(a,b){let c=[],e="";typeof b.minLength!=="undefined"&&b.minLength.value>0&&(c.push({regex:new RegExp(`.{${b.minLength.value},}`)}),e+=`<li class='tpassword-list-item'><i class='fa fa-check'></i> <i class='fa fa-times'></i> ${b.minLength.message}</li>`);typeof b.requireNumbers!=="undefined"&&b.requireNumbers.value&&(c.push({regex:/[0-9]/}),e+=`<li class='tpassword-list-item'><i class='fa fa-check'></i> <i class='fa fa-times'></i> ${b.requireNumbers.message}</li>`);
typeof b.requireLowercase!=="undefined"&&b.requireLowercase.value&&(c.push({regex:/[a-z]/}),e+=`<li class='tpassword-list-item'><i class='fa fa-check'></i> <i class='fa fa-times'></i> ${b.requireLowercase.message}</li>`);typeof b.requireUppercase!=="undefined"&&b.requireUppercase.value&&(c.push({regex:/[A-Z]/}),e+=`<li class='tpassword-list-item'><i class='fa fa-check'></i> <i class='fa fa-times'></i> ${b.requireUppercase.message}</li>`);typeof b.requireSpecialChar!=="undefined"&&b.requireSpecialChar.value&&
(c.push({regex:/[^A-Za-z0-9]/}),e+=`<li class='tpassword-list-item'><i class='fa fa-check'></i> <i class='fa fa-times'></i> ${b.requireSpecialChar.message}</li>`);$(`#${a}`).attr("showpopover","true");var k=$(`#${a}`)[0];k.addEventListener("keyup",function(){$(`#${a}`).attr("showpopover")=="true"&&($(`#${a}`).attr("showpopover","false"),$(k).popover({html:!0,placement:"top",container:"body",content:`
                <ul class='tpassword-checklist' id='${a}-tpassword-checklist'>
                    ${e}
                </ul>
                `,title:b.popoverTitle??"A senha precisa ter:"}).on("shown.bs.popover",function(){}).on("hidden.bs.popover",function(){$(`#${a}`).attr("showpopover","true")}).popover("show"));for(let d=0;d<c.length;d++)c[d].regex.test($(`#${a} input`).val())?($($(`#${a}-tpassword-checklist .tpassword-list-item`)[d]).find(".fa-check").show(),$($(`#${a}-tpassword-checklist .tpassword-list-item`)[d]).find(".fa-times").hide()):($($(`#${a}-tpassword-checklist .tpassword-list-item`)[d]).find(".fa-check").hide(),
$($(`#${a}-tpassword-checklist .tpassword-list-item`)[d]).find(".fa-times").show())})};function tdialog_start(a,b){$.fn.modal.Constructor.prototype._enforceFocus=function(){};$(a).modal({backdrop:!0,keyboard:!0});if(typeof b!="undefined")$(a).on("hidden.bs.modal",function(){b();tdialog_close(a.substring(1))});else $(a).on("hidden.bs.modal",function(){tdialog_close(a.substring(1))})}function tdialog_close(a){$(".modal-backdrop").last().remove();$("#"+a).modal("hide");$("body").removeClass("modal-open");setTimeout(function(){$("#"+a).remove()},300)};function tjquerydialog_start(a,b,c,e,k,d,f,l,p,h,g,m,q){var v=$(a).parent().attr("role")=="window-wrapper"?"#"+$(a).parent().attr("id"):"body",w="Close";typeof Application.translation!=="undefined"&&typeof Application.translation[Adianti.language].close!=="undefined"&&(w=Application.translation[Adianti.language].close);$(a).dialog({modal:b,stack:!1,zIndex:2E3,draggable:c,closeText:w,resizable:e,closeOnEscape:m,height:d,width:k,appendTo:v,dialogClass:q,beforeClose:function(){return typeof g=="function"?
(g(),!1):!0},close:function(u,z){$(this).remove();$(".tooltip.fade").remove();u=$(this).attr("name");$("[window_name="+u+"]").remove()},buttons:h});$(".ui-dialog").last().focus();$(a).closest(".ui-dialog").css({zIndex:p});$(".ui-widget-overlay").css({zIndex:100});f>0&&$(a).closest(".ui-dialog").css({top:f+"px"});l>0&&$(a).closest(".ui-dialog").css({left:l+"px"})}
function tjquerydialog_block_ui(){$(document).ready(function(){$(".ui-dialog").css("pointer-events","none");$(".ui-dialog-content").css("opacity","0.5")})}function tjquerydialog_unblock_ui(){$(".ui-dialog").css("pointer-events","all");$(".ui-dialog-content").css("opacity","")};function tform_send_data(a,b,c,e,k){if(parseInt(k)>0)setTimeout(function(){tform_send_data(a,b,c,e,0)},k);else try{if(b.substr(0,1)=="#")var d=$(b),f=[],l=[];else d=$("form[name="+a+"] [name='"+b+"']"),f=$("form[name="+a+"] [name='"+b+"[]']"),l=$("form[name="+a+"] [widget='tmultifile'][name='file_"+b+"[]']");if(d.length||f.length||l){if(typeof Adianti.formEventsCounter=="undefined"||Number.isNaN(Adianti.formEventsCounter))Adianti.formEventsCounter=0;if(Adianti.formEventsCounter==0)if(l.length)try{l[0].tmultifile.send_data(JSON.parse(c))}catch(u){l[0].tmultifile.setValue(c)}else if(d.length){if(d.attr("widget")==
"thtmleditor")d.summernote("code",c);else if(d.attr("widget")=="bdaterange")bdaterange_set_value("#"+d.attr("id"),c);else if(d.attr("widget")=="tcolor")c?d.data("picker").setColor(c):d.data("picker").setColor(null);else if(d.attr("widget")=="tarrowstep")c?tarrowstep_set_current(d[0].name,c):tarrowstep_clear(d[0].name);else if(d.attr("widget")=="tdate")tdate_set_value("#"+d.attr("id"),c);else if(d.attr("widget")=="bsignaturedrawcapture")bsignaturedrawcapture_set_value(d.attr("id"),c);else if(d.attr("widget")==
"timagecropper")d[0].timagecropper.setValue(c);else if(d.attr("widget")=="tfile")d[0].tfile.setValue(c);else if(d.attr("role")=="tcombosearch"){if(d.val()!==c){var p=function(u){return/<[a-z][\s\S]*>/i.test(u.text)?$("<span>"+u.text+"</span>"):u.text};e?d.val(c).trigger("change"):d.val(c).trigger("change.select2");d.hasClass("tcombo_disabled")&&tmultisearch_disable_field(a,b)}}else if(d.attr("widget")=="tdbuniquesearch"){var h=e;tdbuniquesearch_set_value(a,b,c,function(){h&&(d.attr("exitaction")&&
tform_events_hang_exec(d.attr("exitaction")),d.attr("changeaction")&&tform_events_hang_exec(d.attr("changeaction")))});e=!1}else if(d.attr("component")=="multisearch")c&&(p=function(u){return/<[a-z][\s\S]*>/i.test(u.text)?$("<span>"+u.text+"</span>"):u.text},d.select2({templateResult:p,templateSelection:p}).val(c).trigger("change.select2"));else if(d.attr("type")=="radio"||d.attr("type")=="checkbox")if(d.prop("checked",!1),c){var g=d.filter('[value="'+c+'"]').prop("checked",!0);g.parent().prop("tagName")==
"LABEL"&&(g.parent().parent().find("label").removeClass("active"),g.parent().toggleClass("active"))}else d.parent().prop("tagName")=="LABEL"&&d.parent().parent().find("label").removeClass("active");else d.val(c);e&&(d.attr("exitaction")&&tform_events_hang_exec(d.attr("exitaction")),d.attr("changeaction")&&tform_events_hang_exec(d.attr("changeaction")))}else{if(f.length){if(f.attr("type")=="checkbox")if(f.prop("checked",!1),c){f.parent().parent().find("label").removeClass("active");var m=JSON.parse(c);
$.each(m,function(u,z){u=f.filter('[value="'+z+'"]').prop("checked",!0);u.parent().prop("tagName")=="LABEL"&&u.parent().toggleClass("active")})}else f.parent().parent().find("label").removeClass("active");else if(f.attr("component")=="multientry"){if(c){f.empty();var q=JSON.parse(c);$.each(q,function(u,z){f.append($("<option/>").val(z).text(z))});f.val(q).trigger("change.select2")}}else if(f.attr("component")=="multisearch"&&f.attr("widget")!=="tuniquesearch"){if(c)if(q=JSON.parse(c),p=function(u){return/<[a-z][\s\S]*>/i.test(u.text)?
$("<span>"+u.text+"</span>"):u.text},f.attr("widget")=="tmultisearch")f.select2({templateResult:p,templateSelection:p}).val(q).trigger("change.select2");else{if(f.attr("widget")=="tdbmultisearch"){var v=e;tdbmultisearch_set_value(a,b,c,function(){v&&(f.attr("exitaction")&&tform_events_hang_exec(f.attr("exitaction")),f.attr("changeaction")&&tform_events_hang_exec(f.attr("changeaction")))})}else $.each(q,function(u,z){u=$($(f)[u]).attr("id");tform_send_data(a,"#"+u,z,e)});e=!1}}else if(f.length&&c)if(q=
JSON.parse(c),$(f).find("option").prop("selected",!1),f.attr("widget")=="tselect"&&f.length==1)$.each(q,function(u,z){$(f).find("option").filter('[value="'+z+'"]').prop("selected",!0)}),$(f).attr("role")=="bselectcheck"&&bselectcheck_update_summary(f,$(f).attr("placeholder"));else{var w=e;$.each(q,function(u,z){var A=$($(f)[u]).attr("id");setTimeout(function(){tform_send_data(a,"#"+A,z,w)},0,a,A,z)});e=!1}e&&(f.attr("exitaction")&&tform_events_hang_exec(f.attr("exitaction")),f.attr("changeaction")&&
tform_events_hang_exec(f.attr("changeaction")))}}else tform_events_queue_push(function(){tform_send_data(a,b,c,e)})}}catch(u){console.log(u)}}function tform_send_data_by_id(a,b,c,e,k){$("form[name="+a+"] [id="+b+"]").length>0&&tform_send_data(a,"#"+b,c,e,k)}
function tform_events_hang_exec(a){if(typeof Adianti.formEventsCounter=="undefined"||Number.isNaN(Adianti.formEventsCounter))Adianti.formEventsCounter=0;Adianti.formEventsCounter++;a=a.replace("'callback'","tform_decrease_events_counter");Function(a)()}function tform_events_stop(a){Adianti.formEventsStop=a}function tform_events_queue_push(a){typeof Adianti.formEventsQueue=="undefined"&&(Adianti.formEventsQueue=[]);Adianti.formEventsQueue.push(a);setTimeout(tform_process_events_queue,100)}
function tform_process_events_queue(){if(typeof Adianti.formEventsCounter=="undefined"||Number.isNaN(Adianti.formEventsCounter))Adianti.formEventsCounter=0;Adianti.formEventsCounter==0&&Adianti.formEventsQueue.length>0&&(next=Adianti.formEventsQueue.shift(),next());Adianti.formEventsQueue.length>0?setTimeout(tform_process_events_queue,100):typeof Adianti.formEventsStop=="function"&&(Adianti.formEventsStop(),Adianti.formEventsStop=null)}
function tform_decrease_events_counter(){if(typeof Adianti.formEventsCounter=="undefined"||Number.isNaN(Adianti.formEventsCounter))Adianti.formEventsCounter=0;Adianti.formEventsCounter--}function tform_send_data_aggregate(a,b,c,e){try{$("form[name="+a+"] [name="+b+"]").val()==""?$("form[name="+a+"] [name="+b+"]").val(c):(current_value=$("form[name="+a+"] [name="+b+"]").val(),$("form[name="+a+"] [name="+b+"]").val(current_value+", "+c))}catch(k){console.log(k)}}
function tform_fire_field_actions(a,b){$("form[name="+a+"] [name="+b+"]").attr("exitaction")&&tform_events_hang_exec($("form[name="+a+"] [name="+b+"]").attr("exitaction"));$("form[name="+a+"] [name="+b+"]").attr("changeaction")&&tform_events_hang_exec($("form[name="+a+"] [name="+b+"]").attr("changeaction"))}function tform_hide_field(a,b,c){typeof c=="undefined"?$("#"+a+' [name="'+b+'"]').closest(".tformrow").hide("fast"):$("#"+a+' [name="'+b+'"]').closest(".tformrow").hide(c)}
function tform_show_field(a,b,c){typeof c=="undefined"?$("#"+a+' [name="'+b+'"]').closest(".tformrow").show("fast"):$("#"+a+' [name="'+b+'"]').closest(".tformrow").show(c)};function ttable_clone_previous_row(a){a=$(a).closest("table");var b=a.find("tbody tr:last").clone();tfieldlist_reset_fields(b,!0);a.find("tbody").append(b);ttable_reset_counter(a)}function ttable_clone_row(a){var b=$(a).closest("tr");a=$(a).closest("table");b.prev();var c=b.clone();tfieldlist_reset_fields(c,!1);b.after($(c));ttable_reset_counter(a)}
function ttable_reset_counter(a){var b=0;$(a).find("tr").each(function(c,e){c=$(e).find("input,select");$(e).data("row",b);c.length>0&&($.each(c,function(k,d){$(d).data("row",b)}),b++)})}function ttable_remove_row(a){setTimeout(function(){var b=$(a).closest("table"),c=b.find("tbody").find("tr:visible").length;tr=$(a).closest("tr");c==1&&(c=tr.clone(),tfieldlist_reset_fields(c,!0),tr.after($(c)));tr.remove();ttable_reset_counter(b)},10)}
function ttable_remove_row_by_id(a,b){$("#"+a).find("tr[id="+b+"]").remove()}function ttable_show_row(a,b){$("#"+a).find("tr#"+b).show()}function ttable_hide_row(a,b){$("#"+a).find("tr#"+b).hide()}function ttable_sortable_rows(a,b,c){$(document).ready(function(){$("#"+a+" tbody").sortable({handle:b,deactivate:c})})}function ttable_get_column_values(a,b){return $("#"+a+" tbody").find("tr").find("td:nth-child("+b+")").map(function(){return this.innerText}).get().join(",")}
function ttable_add_row(a,b,c){$("#"+a+" tbody").append(base64_decode(c))}function ttable_replace_row_by_id(a,b,c){$("#"+a+" tbody").find("#"+b).length>0?$("#"+a+" tbody").find("#"+b).replaceWith(base64_decode(c)):$("#"+a+" tbody").append(base64_decode(c))};function tfieldlist_reset_fields(a,b){var c=parseInt(Math.random()*1E8);$(a).attr("id",c);var e=$(a).find("input,select,textarea"),k=[];$.each(e,function(d,f){d=$(f).attr("id");var l=$(f).attr("widget"),p=$(f).attr("role");if(typeof d!=="undefined"){var h=d.split("_");h.pop();var g=h.join("_"),m=g+"_"+c;h=$(f).parent();k.indexOf(m)>=0&&(m=g+parseInt(Math.random()*100)+"_"+c);k.push(m);if(l=="tdate"||l=="ttime"||l=="tdatetime"){$(f).attr("id",m);b&&$(f).val("");typeof $(f).attr("exitaction")!=="undefined"&&
$(f).attr("exitaction",$(f).attr("exitaction").replace(d,m));typeof $(f).attr("onblur")!=="undefined"&&$(f).attr("onblur",$(f).attr("onblur").replace(d,m));typeof $(f).attr("changection")!=="undefined"&&$(f).attr("changection",$(f).attr("changection").replace(d,m));typeof $(f).attr("onchange")!=="undefined"&&$(f).attr("onchange",$(f).attr("onchange").replace(d,m));grandparent=$(h).parent();f=$(f).detach();$(h).remove();grandparent.append(f);p=l;l=="ttime"&&(p="tdatetime");var q=new RegExp(d,"g");
tfieldlist_execute_scripts(grandparent,p,function(u){return u=u.replace(q,m)})}else if(l=="tentry")h=$(f).closest("td"),$(f).attr("id",m),b&&($(f).attr("name").match("/__row__id/")||$(f).val("")),typeof $(f).attr("exitaction")!=="undefined"&&$(f).attr("exitaction",$(f).attr("exitaction").replace(d,m)),typeof $(f).attr("onblur")!=="undefined"&&$(f).attr("onblur",$(f).attr("onblur").replace(d,m)),q=new RegExp(d,"g"),tfieldlist_execute_scripts(h,"tentry",function(u){return u=u.replace(q,m)});else if(l==
"tspinner")$(f).attr("id",m),b&&$(f).val(""),typeof $(f).attr("exitaction")!=="undefined"&&$(f).attr("exitaction",$(f).attr("exitaction").replace(d,m)),typeof $(f).attr("onblur")!=="undefined"&&$(f).attr("onblur",$(f).attr("onblur").replace(d,m)),grandparent=$(h).parent(),f=$(f).detach(),$(h).remove(),grandparent.append(f),q=new RegExp(d,"g"),tfieldlist_execute_scripts(grandparent,"tspinner",function(u){return u=u.replace(q,m)});else if(l=="tcolor")$(f).attr("id",m),b&&$(f).val(""),typeof $(f).attr("exitaction")!==
"undefined"&&$(f).attr("exitaction",$(f).attr("exitaction").replace(d,m)),typeof $(f).attr("onblur")!=="undefined"&&$(f).attr("onblur",$(f).attr("onblur").replace(d,m)),grandparent=$(h).parent(),grandparent.find(".pickr").replaceWith('<span class="input-group-addon tcolor"><i class="tcolor-icon"></i></span>'),q=new RegExp(d,"g"),tfieldlist_execute_scripts(grandparent,"tcolor",function(u){return u=u.replace(q,m)});else if(l=="thidden")$(f).attr("id",m),$(f).attr("uniqid")=="true"?$(f).val(parseInt(Math.random()*
1E10)):b&&$(f).val(""),q=new RegExp(d,"g"),tfieldlist_execute_scripts(h,"thidden",function(u){return u=u.replace(q,m)});else if(l=="ttext")h=$(f).closest("td"),$(f).attr("id",m),b&&($(f).attr("name").match("/__row__id/")||$(f).val("")),typeof $(f).attr("exitaction")!=="undefined"&&$(f).attr("exitaction",$(f).attr("exitaction").replace(d,m)),typeof $(f).attr("onblur")!=="undefined"&&$(f).attr("onblur",$(f).attr("onblur").replace(d,m)),q=new RegExp(d,"g"),tfieldlist_execute_scripts(h,"ttext",function(u){return u=
u.replace(q,m)});else if(l=="tdbmultisearch"||l=="tdbuniquesearch")$(f).attr("id",m),$(f).removeData("select2-id").removeAttr("data-select2-id").find("option").removeAttr("data-select2-id"),$(a).removeData("select2-id").removeAttr("data-select2-id"),$(h).find(".select2-container").remove(),q=new RegExp(d,"g"),tfieldlist_execute_scripts(h,"tdbmultisearch",function(u){return u=u.replace(q,m)}),b&&setTimeout(function(){$(f).val("").trigger("change.select2")},10);else if(l=="tmultisearch"||l=="tuniquesearch")$(f).attr("id",
m),$(f).removeData("select2-id").removeAttr("data-select2-id").find("option").removeAttr("data-select2-id"),$(a).removeData("select2-id").removeAttr("data-select2-id"),$(h).find(".select2-container").remove(),q=new RegExp(d,"g"),tfieldlist_execute_scripts(h,"tmultisearch",function(u){return u=u.replace(q,m)}),b&&setTimeout(function(){$(f).val("").trigger("change.select2")},10);else if(l=="tcombo")$(f).attr("id",m),b&&$(f).val(""),p=="tcombosearch"&&($(f).removeData("select2-id").removeAttr("data-select2-id").find("optgroup").removeAttr("data-select2-id"),
$(f).removeData("select2-id").removeAttr("data-select2-id").find("option").removeAttr("data-select2-id"),$(f).removeData("select2-id").removeAttr("data-select2-id").find("optgroup").find("option").removeAttr("data-select2-id"),$(a).removeData("select2-id").removeAttr("data-select2-id"),$(h).find(".select2-container").remove()),typeof $(f).attr("changeaction")!=="undefined"&&$(f).attr("changeaction",$(f).attr("changeaction").replace(d,m)),typeof $(f).attr("onchange")!=="undefined"&&$(f).attr("onchange",
$(f).attr("onchange").replace(d,m)),q=new RegExp(d,"g"),tfieldlist_execute_scripts(h,"tcombo",function(u){return u=u.replace(q,m)});else if(l=="tfile"){$(f).attr("id",m);b&&$(f).val("");h=$(f).closest("td");p=h.find(".div_file").attr("id");var v="div_file_"+m;h.find(".tfile_row_wrapper").remove();h.find(".file-response-icon").remove();h.find(".div_file").attr("id",v);$(f).css("padding-left","5px");h.find(".tfile_dropzone").length>0&&(h.find(".tfile_dropzone").attr("id","tfile_dropzone_"+m),h.find(".tfile_dropzone_info").attr("id",
"tfile_dropzone_info_"+m),h.find(".tfile_dropzone_info").empty());typeof $(f).attr("changeaction")!=="undefined"&&$(f).attr("changeaction",$(f).attr("changeaction").replace(d,m));typeof $(f).attr("onchange")!=="undefined"&&$(f).attr("onchange",$(f).attr("onchange").replace(d,m));q=new RegExp(d,"g");var w=new RegExp(p,"g");tfieldlist_execute_scripts(h,"tfile",function(u){u=u.replace(q,m);return u=u.replace(w,v)})}}l=="tradiobutton"?$(f).parent().removeClass("active"):l=="tcheckbutton"&&$(f).parent().removeClass("active")});
$(a).find("[name$='__row__id[]']").val(c)}function tfieldlist_execute_scripts(a,b,c){a=$(a).find("script");$.each(a,function(e,k){e=$(k).text();e=c(e);e.trim().split("_")[0]==b&&$(k).replaceWith("<script>"+e+"\x3c/script>")})}
function tfieldlist_clear(a){ttable_clone_previous_row($("[name="+a+"] tbody"));var b=$("[name="+a+"] tbody").find("tr").length-1;$("[name="+a+"] tbody").find("tr").each(function(c,e){c<b&&ttable_remove_row(e)});$("[name="+a+"] tfoot").find('input[type="text"]').each(function(c,e){tfieldlist_update_sum(a,$(e).attr("field_name"))})}function tfieldlist_add_rows(a,b,c){c=c?c:50;for(n=1;n<=b;n++)setTimeout(function(){ttable_clone_previous_row($("[name="+a+"] tbody"))},c*n)}
function tfieldlist_clear_rows(a,b,c){var e=$("[name="+a+"] tbody").find("tr").length;c=(c==0?e:c)+b;c>=e&&(ttable_clone_previous_row($("[name="+a+"] tbody").find("tr:last")),c=e);$("[name="+a+"] tbody").find("tr").each(function(k,d){k>=b&&k<c&&$(d).remove()})}
function tfieldlist_get_last_row_data(a){var b={};b.index=$(a).closest("table").find("tbody tr:last").index();$(a).closest("table").find("tbody tr:last").find("[name]").each(function(c,e){c=$(e).attr("name");c=c.replace("[]","");b[c]=$(e).val()});return b}function tfieldlist_get_row_data(a){var b={};b.index=$(a).closest("tr").index();b._row_id=$(a).closest("tr").attr("id");$(a).closest("tr").find("[name]").each(function(c,e){c=$(e).attr("name");c=c.replace("[]","");b[c]=$(e).val()});return b}
function tfieldlist_column_sum(a){var b=0;$('[name="'+a+'[]"]').each(function(c,e){c=tentry_get_data_by_id($(e).attr("id"));isNaN(parseFloat(c))||(b+=parseFloat(c))});return b}function tfieldlist_column_count(a){var b=0;$('[name="'+a+'[]"]').each(function(c,e){tentry_get_data_by_id($(e).attr("id"))&&b++});return b}
function tfieldlist_update_sum(a,b,c){setTimeout(function(){var e=tfieldlist_column_sum(b),k=$("[name^="+b+"]:first").data("nmask"),d=[],f=$("table[name="+a+"]").closest("form");k&&(d=k.split(""));k=$("[name=grandtotal_"+b+"]");e=number_format(e,d[0]??2,d[1]??",",d[2]??".");k.val(e);k.data("total-form-field")&&(d=k.data("total-form-field"),f.find('[name="'+d+'"]').val(e));c&&typeof c==="function"&&c();f=$("table[name="+a+"]").attr("total-update-action");if(typeof f!=="undefined"&&f.length>0){if(d=
$("table[name="+a+"]").closest("form")){var l={};e={};d=$(d).serializeArray();$(d).each(function(p,h){p=h.name;p=p.replace("[]","");l[p]===void 0&&(l[p]=[]);l[p].push(h.value)});for(prop in l)if(l[prop].length>=1)for(d=0;d<l[prop].length;d++)typeof e[d]=="undefined"&&(e[d]={}),e[d][prop]=l[prop][d];l.list_data=e}__adianti_post_exec(f,l,null,"1",!0)}},50)}
function tfieldlist_update_count(a,b,c){setTimeout(function(){var e=tfieldlist_column_count(b),k=$("[name^="+b+"]:first").data("nmask"),d=[];k&&(d=k.split(""));$("[name=grandtotal_"+b+"]").val(number_format(e,d[0]??2,d[1]??",",d[2]??"."));c&&typeof c==="function"&&c();e=$("table[name="+a+"]").attr("total-update-action");if(typeof e!=="undefined"&&e.length>0){if(d=$("table[name="+a+"]").closest("form")){var f={};k={};d=$(d).serializeArray();$(d).each(function(l,p){l=p.name;l=l.replace("[]","");f[l]===
void 0&&(f[l]=[]);f[l].push(p.value)});for(prop in f)if(f[prop].length>=1)for(d=0;d<f[prop].length;d++)typeof k[d]=="undefined"&&(k[d]={}),k[d][prop]=f[prop][d];f.list_data=k}__adianti_post_exec(e,f,null,"1",!0)}},50)}function tfieldlist_enable_field(a){try{$('table.tfieldlist[name="'+a+'"]').length>0&&$('table.tfieldlist[name="'+a+'"]').parent().find(".tfieldlist-disable").remove()}catch(b){console.log(b)}}
function tfieldlist_disable_field(a){try{$('table.tfieldlist[name="'+a+'"]').length>0&&$('table.tfieldlist[name="'+a+'"]').parent().prepend('<div class="tfieldlist-disable"></div>')}catch(b){console.log(b)}};function tdatagrid_inlineedit(a){$(function(){$(".inlineediting").editInPlace({callback:function(b,c){__adianti_load_page($(this).attr("action")+a+"&key="+$(this).attr("key")+"&"+$(this).attr("pkey")+"="+$(this).attr("key")+"&field="+$(this).attr("field")+"&value="+encodeURIComponent(c));return c},show_buttons:!1,text_size:20,params:column=name})})}function tdatagrid_add_serialized_row(a,b){$("#"+a+" > tbody:last-child").append(b)}
function tdatagrid_enable_groups(){$("[id^=tdatagrid_] tr[level]").not("[x=1]").css("cursor","pointer").attr("x","1").click(function(){$(this).data("child-visible")||$(this).data("child-visible",!1);$(this).data("child-visible",!$(this).data("child-visible"));$(this).data("child-visible")?$(this).siblings('[childof="'+$(this).attr("level")+'"]').hide("fast"):$(this).siblings('[childof="'+$(this).attr("level")+'"]').show("fast")})}
function tdatagrid_update_total(a){var b=a.substring(1),c=document.querySelector(a),e=$(a).closest("form");(new MutationObserver(function(k){k.forEach(function(d){if(d.target.tagName=="TBODY"){d=$(a).find("[data-total-function=sum]");var f=$(a).find("[data-total-function=count]");d.each(function(l,p){var h=0,g=$(p).data("column-name"),m=$(p).data("total-mask"),q=m.split(":");q.length>0?(l=q[0],m=q[1]):(l="",m=m.substring(1));$('[name="'+b+"_"+g+'[]"]').each(function(v,w){h+=parseFloat($(w).val())});
g=number_format(h,m.substring(0,1),m.substring(1,2),m.substring(2,3));$(p).html("");h&&$(p).html(l+" "+g);$(p).data("value",h);$(p).attr("data-value",h);$(p).data("total-form-field")&&(p=$(p).data("total-form-field"),e.find('[name="'+p+'"]').val(g))});f.each(function(l,p){l=$(p).data("column-name");l=$('[name="'+b+"_"+l+'[]"]').length;var h=$(p).data("total-mask"),g=h.split(":");if(g.length>0){var m=g[0];h=g[1]}else m="",h=h.substring(1);h=number_format(l,h.substring(0,1),h.substring(1,2),h.substring(2,
3));$(p).html("");l&&$(p).html(m+" "+h);$(p).data("value",l);$(p).attr("data-value",l);$(p).data("total-form-field")&&(p=$(p).data("total-form-field"),$('[name="'+p+'"]').val(l))})}})})).observe(c,{attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})}
function tdatagrid_mutation_action(a,b){var c=a.substring(1),e=document.querySelector(a);(new MutationObserver(function(k){k.forEach(function(d){var f={},l={};if(d.target.tagName=="TBODY"){$(a).find("[data-hidden-field=true]").each(function(h,g){h=$(g).attr("name").replace(c+"_","");h=h.replace("[]","");h.substring(0,1)!=="="&&(typeof f[h]=="undefined"&&(f[h]=[]),f[h].push($(g).val()))});for(prop in f)for(d=0;d<f[prop].length;d++)typeof l[d]=="undefined"&&(l[d]={}),l[d][prop]=f[prop][d];var p={};
if(d=$(a).closest("form"))d=$(d).serializeArray(),$(d).each(function(h,g){h=g.name.replace("[]","");p[h]=g.value});p.list_data=l;__adianti_post_exec(b,p,null,"1",!0)}})})).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})}
function tdatagrid_show_properties(a,b){const c=$(a),e=c.closest("table"),k=e.attr("id");if(c.data("bs.popover"))c.popover("toggle");else{var d=[];e.find("th.tdatagrid_col").each(function(){const f=$(this),l=f.text().replace(/[\n\r]+|[\s]{2,}/g," ").trim(),p=f.index(),h=!f.is(":hidden");l&&d.push({value:f.attr("data-column-id"),name:l,index:p,visible:h})});a=`
        <div class="property-section">
            <label for="page-size-${k}">Registros por p\u00e1gina:</label>
            <select id="page-size-${k}" class="page-size-select form-control">
                ${[10,20,50,100,200,500].map(f=>`<option value="${f}">${f}</option>`).join("")}
            </select>
        </div>
                
        <div class="property-divider"></div>
        
        <div class="property-section">
            <label>${Builder.translate("visible_columns")}</label>
            <div class="columns-container">
                ${d.map(f=>`
                    <div class="column-item">
                        <label style="cursor:pointer;">
                            <input type="checkbox" 
                                  class="column-visibility" 
                                  value="${f.value}"
                                  data-column="${f.index}" 
                                  ${f.visible?"checked":""}>
                            ${f.name}
                        </label>
                    </div>
                `).join("")}
            </div>
        </div>
        
        <div class="property-section actions" style="padding-top: 15px;">
            <button class="apply-properties btn btn-sm btn-primary">${Builder.translate("apply")}</button>
            <button class="reset-properties btn btn-sm btn-default">${Builder.translate("reset")}</button>
            <button class="cancel-properties btn btn-sm btn-default">${Builder.translate("cancel")}</button>
        </div>

		<style>
			.tdatagrid-property-popover {
			    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(0, 0, 0, 0.06);
				border-radius: 12px;
				border: 1px solid rgba(255, 255, 255, 0.3);	
			}
		</style>
    `;c.popover({html:!0,content:a,placement:"left",container:"body",delay:{show:10,hide:10},trigger:"manual",sanitizeFn:function(f){return f},template:'<div class="popover tdatagrid-property-popover" role="tooltip"><div class="arrow"></div><div class="popover-header"></div><div class="popover-body"></div></div>'});c.on("shown.bs.popover",function(){const f=$(".tdatagrid-property-popover");f.find(".cancel-properties").click(function(){c.popover("hide")});f.find(".apply-properties").click(function(){f.find(".column-visibility").each(function(){var h=
$(this);const g=h.data("column");h=h.prop("checked");tdatagrid_toggle_column_visibility(e,g,h)});const l=f.find(".page-size-select").val(),p=f.find(".group-column-select").val();tdatagrid_save_preferences(k,{page_limit:l,groups:p,columns:getColumnsVisibility(f)});c.popover("hide");__adianti_post_exec(b,{page_limit:l,groups:p,columns:getColumnsVisibility(f)},null,!0,!0)});f.find(".reset-properties").click(function(){tdatagrid_save_preferences(k,null);c.popover("hide");__adianti_post_exec(b,{reset_datagrid_properties:1},
null,!0,!0)})});c.on("hidden.bs.popover",function(){c.popover("dispose")});setTimeout(()=>c.popover("show"),10)}}function getColumnsVisibility(a){const b=[];a.find(".column-visibility").each(function(){const c=$(this);b.push({columnId:c.prop("value"),visible:c.prop("checked")})});return b}function tdatagrid_toggle_column_visibility(a,b,c){a=a.find(`tr > *:nth-child(${b+1})`);c?a.show():a.hide()}
function tdatagrid_start_hide_columns(a){$(`${a} tr th[data-start-hide='true']`).each(function(b){b=$(this).index();$(this).hide();$(`${a} tr td:nth-child(${b+1})`).hide()})}function tdatagrid_save_preferences(a,b){window.localStorage&&localStorage.setItem(`datagrid_preferences_${a}`,JSON.stringify(b))}
function tdatagrid_init_header_popover_filters(a){setTimeout(()=>{const b=$(`#${a}`);b.data("filter-popover-initialized")||(b.data("filter-popover-initialized",!0),b.find("#datagrid-header-filter-row").hide(),b.find("#datagrid-header-filter-row td").each(function(){const c=$(this),e=c.find("input, select");if(e.length!==0){var k=b.find("thead tr th").eq(c.index()),d=$('<i class="fas fa-filter filter-icon" style="margin-right: 5px; cursor: pointer;"></i>');k.prepend(d);k=e.first().attr("widget");var f=
e.first().attr("changeaction"),l=e.first().attr("exitaction");if(k==="bdaterange"){const h=e.first().closest(".bdaterange-container");f=h.data("picker-options")?.changeaction;e.off("change");h.data("picker")?.off("select click");h.data("event-enabled",!1)}e.data("changeaction",f);e.data("exitaction",l);k!=="tcombo"||e.attr("role")!=="tcombosearch"&&e.attr("role")!=="bselectcheck"?e.removeAttr("onchange onblur changeaction exitaction").off("change blur"):e.off("change.changeaction");var p=e.first().attr("id");
d.data("filter_id",p);d.popover({html:!0,content:function(){if(e.attr("role")==="bselectcheck"){var h=$('<div style="display: flex; align-items: center; min-width: 400px;"></div>'),g=$(`<div style="width: 100%;" id="filter-container-${p}"></div>`);c.contents().appendTo(g);h.append(g);g=$('<button class="btn btn-sm btn-primary apply-filter" style="margin-left: 8px;"><i class="fas fa-check"></i> Aplicar</button><button class="btn btn-sm btn-default clear-filter" style="margin-left: 4px;"><i class="fas fa-eraser"></i></button>');
h.append(g);h.find(".apply-filter").on("click",function(){d.popover("hide");f&&eval(f);l&&eval(l)});h.find(".clear-filter").on("click",function(){e.val("");d.popover("hide");f&&eval(f);l&&eval(l)});return h}h=$('<div class="filter-container" style="min-width: 250px; display: flex; flex-direction: column; align-items: center;"></div>');g=$(`<div style="min-width: 250px; display: flex; flex-direction: column; align-items: center;" id="filter-container-${p}"></div>`);c.contents().appendTo(g);h.append(g);
g=$('<div style="margin-top: 10px; text-align: center; width: 100%; display: flex; justify-content: center; gap: 8px;"><button class="btn btn-sm btn-primary apply-filter"><i class="fas fa-check"></i> Aplicar</button><button class="btn btn-sm btn-default clear-filter"><i class="fas fa-times"></i> Limpar</button></div>');g.find(".apply-filter").on("click",function(){d.popover("hide");f&&eval(f);l&&eval(l)});g.find(".clear-filter").on("click",function(){e.first().attr("widget")==="bdaterange"?e.first().closest(".bdaterange-container").data("picker").clear():
e.val("");d.popover("hide");f&&eval(f);l&&eval(l)});h.append(g);return h},placement:"auto",trigger:"manual",container:d.closest("form")}).on("hide.bs.popover",function(){$(`#filter-container-${p}`).contents().appendTo(c)}).on("shown.bs.popover",function(){$(".popover").css("max-width","500px")});d.on("click",function(h){h.stopPropagation();h.preventDefault();h.stopImmediatePropagation();d.popover("toggle")})}}),tdatagrid_update_filter_icons(a),tdatagrid_update_filter_badges(a))},1)}
function tdatagrid_update_filter_badges(a){const b=$(`#${a}`);b.prev(".filter-badges-container").remove();a=$('<div class="filter-badges-container" style="margin-bottom: 10px; min-height: 50px;"><div style="font-size: 12px; color: #666; display: flex; align-items: center; gap: 5px;"><i class="fas fa-filter"></i><span>Filtros aplicados:</span></div><div style="display: flex; flex-wrap: wrap; gap: 3px; margin-top: 2px;"></div></div>');const c=a.find("div").eq(1);let e=!1;b.find("#datagrid-header-filter-row td").each(function(k){const d=
$(this).find("input, select");if(d.length!==0){k=b.find("thead tr th").eq(k).text().trim();var f=d.val();if(Array.isArray(f)&&f.length>0||!Array.isArray(f)&&f!=null&&f!==""){e=!0;let l=f;d.first().attr("widget")==="bdaterange"?l=`${d.first().val()} - ${d.eq(1).val()}`:Array.isArray(f)?l=d.find("option:selected").map(function(){return $(this).text()}).get().join(" - "):d.is("select")&&(l=d.find("option:selected").text());k=$('<div style="border: 1px solid var(--button-border); border-radius: 4px; padding: 4px 8px; display: flex; align-items: center; gap: 4px; font-size: 12px;">'+
`<span>${k}: <b>${l}</b></span>`+'<span title="Remover filtro" class="btn btn-sm btn-link remove-filter" style="padding: 0 2px; font-size: 12px; line-height: 1; background: none; border: none; box-shadow: none; min-height: 15px; height: 15px; color: var(--button-text);">\u00d7</span></div>');k.find(".remove-filter").on("click",function(){d.first().attr("widget")==="bdaterange"?d.first().closest(".bdaterange-container").data("picker").clear():d.val("");const p=d.data("changeaction"),h=d.data("exitaction");
p?eval(p):h&&eval(h)});c.append(k)}}});b.before(a);a.toggle(e)}function tdatagrid_update_filter_icons(a){const b=$(`#${a}`);b.find("#datagrid-header-filter-row td").each(function(c){var e=$(this).find("input, select");e.length!==0&&(c=b.find("thead tr th").eq(c).find(".filter-icon"),e=e.val(),c.css("color",Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e!=null&&e!==""?"var(--main-color)":""))})};function tbutton_enable_field(a,b){setTimeout(function(){$("button[name="+b+"]").removeAttr("disabled");$("button[name=btn_"+b+"]").removeAttr("disabled");$("#tbutton_"+b).removeAttr("disabled")},1)}function tbutton_disable_field(a,b){setTimeout(function(){$("button[name="+b+"]").attr("disabled",!0);$("button[name=btn_"+b+"]").attr("disabled",!0);$("#tbutton_"+b).attr("disabled",!0)},1)};function tcheckgroup_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [checkgroup="+b+"]").attr("onclick",null);$("form[name="+a+"] [checkgroup="+b+"]").css("pointer-events","auto");$("form[name="+a+"] [checkgroup="+b+"]").closest(".toggle-wrapper").removeClass("tfield_block_events")},1)}
function tcheckgroup_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [checkgroup="+b+"]").attr("onclick","return false");$("form[name="+a+"] [checkgroup="+b+"]").css("pointer-events","none");$("form[name="+a+"] [checkgroup="+b+"]").closest(".toggle-wrapper").addClass("tfield_block_events")},1)}function tcheckgroup_clear_field(a,b){setTimeout(function(){$("form[name="+a+"] [checkgroup="+b+"]").prop("checked",!1)},1)}
function tcheckgroup_reload(a,b,c){$("form[name="+a+"] [tcheckgroup="+b+"]").replaceWith(c)};function tcolor_enable_field(a,b){try{setTimeout(function(){$("form[name="+a+"] [name="+b+"]").trigger("enable");$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled")},1)}catch(c){console.log(c)}}function tcolor_disable_field(a,b){try{setTimeout(function(){$("form[name="+a+"] [name="+b+"]").trigger("disable");$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled")},1)}catch(c){console.log(c)}}
function tcolor_start(a,b,c,e,k){var d={pt:{clear:"Limpar",save:"Salvar"},es:{clear:"Limpiar",save:"Guardar"},en:{clear:"Clear",save:"Save"}},f=$(`#${a}`);f.css("width",`calc( ${b} - 30px )`);k.el=`#${a}+.tcolor`;k.theme=c;k.default=f.val()?f.val():null;k.i18n={"btn:clear":d[Adianti.language].clear,"btn:save":d[Adianti.language].save};var l=Pickr.create(k);$(`#${a}`).on("focusin",function(){l.show()});$(`#${a}`).data("picker",l);f.on("disable",function(){l.disable()});f.on("enable",function(){l.enable()});
l.on("save",function(p,h){const g=f.val();p=p?.toHEXA().toString();f.val(p);h.hide();g!=p&&typeof e!="undefined"&&e(p)});l.on("swatchselect",function(p,h){h.applyColor()});f.on("change",function(){var p=this.value.indexOf("#")==-1?"#":"";this.value?l.setColor(p+this.value,!1):l.setColor(null)})};function ticon_enable_field(a,b){try{setTimeout(function(){$("form[name="+a+'] div[name="block_'+b+'"]').remove()},1)}catch(c){console.log(c)}}
function ticon_disable_field(a,b){try{input=$("form[name="+a+"] [name="+b+"]").closest(".input-group"),setTimeout(function(){$("form[name="+a+'] div[name="block_'+b+'"]').remove()},19),setTimeout(function(){input.prepend('<div name="block_'+b+'" style="position:absolute; width:'+input.width()+"px; height:"+input.height()+'px; background: #c0c0c0; opacity:0.5;"></div>')},20)}catch(c){console.log(c)}}
function ticon_start(a,b){if(b)$("#"+a).iconpicker().on("iconpickerUpdated",function(c){b($(this).val())});else $("#"+a).iconpicker()};function tcombo_enable_field(a,b){form_name_sel=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var c='[name="'+b+'"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(c="#"+b);try{$(form_name_sel+c).attr("role")=="tcombosearch"?tmultisearch_enable_field(a,b):($(form_name_sel+c).attr("onclick",null),$(form_name_sel+c).css("pointer-events","auto")),$(form_name_sel+c).removeClass("tcombo_disabled")}catch(e){console.log(e)}}
function tcombo_disable_field(a,b){form_name_sel=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var c='[name="'+b+'"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(c="#"+b);try{$(form_name_sel+c).attr("role")=="tcombosearch"?tmultisearch_disable_field(a,b):($(form_name_sel+c).attr("onclick","return false"),$(form_name_sel+c).attr("tabindex","-1"),$(form_name_sel+c).css("pointer-events","none")),$(form_name_sel+c).addClass("tcombo_disabled")}catch(e){console.log(e)}}
function tcombo_add_option(a,b,c,e){c=c.replace(/"/g,"");a=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var k='select[name="'+b+'"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(k="#"+b);b=$(a+k).find("optgroup");b.length>0?$('<option value="'+c+'">'+e+"</option>").appendTo(b.last()):$('<option value="'+c+'">'+e+"</option>").appendTo(a+k)}
function tcombo_create_opt_group(a,b,c){a=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var e='[name="'+b+'"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(e="#"+b);$('<optgroup label="'+c+'"></optgroup>').appendTo(a+e)}
function tcombo_clear(a,b,c){typeof c=="undefined"&&(c=!0);a=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var e='[name="'+b+'"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(e="#"+b);b=$(a+e);b.attr("role")=="tcombosearch"?b.find("option:not(:disabled)").length>0&&b.val("").empty():(b.val(!1),b.html(""));c&&b.attr("changeaction")&&tform_events_hang_exec(b.attr("changeaction"))}
function tcombo_enable_search(a,b){$(a).removeAttr("onchange");b={escapeMarkup:function(c){return c},allowClear:!0,placeholder:b,templateResult:function(c){return/<[a-z][\s\S]*>/i.test(c.text)?$("<span>"+c.text+"</span>"):c.text},templateSelection:function(c){return/<[a-z][\s\S]*>/i.test(c.text)?$("<span>"+c.text+"</span>"):c.text}};select2_prepare_no_results(b,a);$(a).select2(b).on("change.changeaction",function(c){(new Function($(a).attr("changeaction")))()})}
function tcombo_set_quick_register_value(a,b){a=$(a).val();$("#"+b+"_quickregister").val(a);$("#"+b+"_btn").attr("data-quick_register_value",a)}
function select2_prepare_no_results(a,b){if(typeof $(b).attr("noresultsbtnprops")!="undefined"){const c=JSON.parse(base64_decode($(b).attr("noresultsbtnprops")));a.language={noResults:function(){const e=c.noResultsMessage||$.fn.select2.defaults.defaults.language.noResults();var k=$(c.btn);$(b).data("row")!="undefined"&&(k.attr("data-row",$(b).data("row")),k.attr("data-id",$(b).attr("id")),k.attr("id",$(b).attr("id")));k=k.get(0).outerHTML;return`
                    <span>${e}</span>
                    <div class="no-results-wrapper">
                        ${k}
                    </div>
                `}}}if(typeof $(b).attr("noresultsquickregisterprops")!="undefined"){const c=JSON.parse(base64_decode($(b).attr("noresultsquickregisterprops")));a.language={noResults:function(){const e=c.noResultsMessage||$.fn.select2.defaults.defaults.language.noResults();var k=$(b).data("select2").$dropdown.find(".select2-search__field").val();let d=c.input,f=c.btn;k&&(d=d.replace('value=""','value="'+k+'"'),f=f.replace('data-quick_register_value=""','data-quick_register_value="'+k+'"'));k=$(f);
$(b).data("row")!="undefined"&&(k.attr("data-row",$(b).data("row")),k.attr("data-id",$(b).attr("id")),k.attr("id",$(b).attr("id")));k=k.get(0).outerHTML;return`
                    <span>${e}</span>
                    <div class="no-results-wrapper">
                        ${d}
                        ${k}
                    </div>
                `}}}if(typeof $(b).attr("noresultsquickregisterprops")!="undefined")$(b).on("select2:open",function(){$(this).data("select2").$dropdown.find(".select2-search__field").off("input").on("input",function(c){c=$(this).val();$(b+"_quickregister").val(c);$(b+"_btn").attr("data-quick_register_value",c);$(b).data("row")!="undefined"&&($(b+"_btn").attr("data-row",$(b).data("row")),$(b+"_btn").attr("data-id",$(b).attr("id")),$(b+"_btn").attr("id",$(b).attr("id")))})})};function tdate_enable_field(a,b){try{$('form[name="'+a+'"] [name="'+b+'"]').removeClass("tfield_disabled"),$('form[name="'+a+'"] [name="'+b+'"]').css("pointer-events","auto"),$('form[name="'+a+'"] [name="'+b+'"]').removeAttr("tabindex"),$('form[name="'+a+'"] [name="'+b+'"]').attr("readonly",!1)}catch(c){console.log(c)}setTimeout(function(){$('form[name="'+a+'"] [name="'+b+'"]').next().show()},1)}
function tdate_disable_field(a,b){try{$('form[name="'+a+'"] [name="'+b+'"]').addClass("tfield_disabled"),$('form[name="'+a+'"] [name="'+b+'"]').css("pointer-events","none"),$('form[name="'+a+'"] [name="'+b+'"]').attr("tabindex","-1"),$('form[name="'+a+'"] [name="'+b+'"]').attr("readonly",!0)}catch(c){console.log(c)}setTimeout(function(){$('form[name="'+a+'"] [name="'+b+'"]').next().hide()},1)}function tdate_set_value(a,b){$(a).val(b);$(a).closest(".tdate-group").datepicker("update")}
function tdate_start(a,b,c,e,k){$(a).wrap('<div class="tdate-group date">');$(a).after('<span class="btn btn-default tdate-group-addon"><i class="far fa-calendar"></i></span>');k=Object.assign({format:b,todayBtn:"linked",language:c,calendarWeeks:!1,autoclose:!0,todayHighlight:!0,orientation:"bottom auto"},JSON.parse(k));$(a).closest(".tdate-group").datepicker(k).on("changeDate",function(d){$(a).attr("exitaction")&&(new Function($(a).attr("exitaction")))()}).on("show",function(){$(".datepicker").on("click",
function(d){d.stopPropagation()})});e!=="undefined"&&$(a).closest(".tdate-group").width(e)};function tdatetime_start(a,b,c,e,k){$(a).wrap('<div class="tdate-group tdatetimepicker input-append date">');$(a).after('<span class="add-on btn btn-default tdate-group-addon"><i class="far fa-clock icon-th"></i></span>');atributes={autoclose:!0,todayBtn:!0,todayHighlight:!0,format:b,language:c};k=Object.assign(atributes,JSON.parse(k));$(a).closest(".tdate-group").datetimepicker(k).on("change.dp",function(d){$(a).attr("exitaction")&&(new Function($(a).attr("exitaction")))()}).on("show",function(){$(".datepicker").on("click",
function(d){d.stopPropagation()})});e!=="undefined"&&$(a).closest(".tdate-group").width(e)};function tdbentry_start(a,b,c){$('input[name="'+a+'"]').autocomplete({serviceUrl:b,minChars:c})};/*
  Copyright (c) 2006 Adianti Solutions Ltd. (http://www.adianti.com.br)
 @license    http://www.adianti.com.br/framework-license
 @enterprise  WebSeller Sistemas Integrados
 @author  Wellington Camargo Serra
 @author  Tiago Fernando Shirmer
 @author  Cristian Tales

 @param field = Name do campo a ser aplicado a mascara.
 @param event = Evento de disparo js
 @param mask  = Mascara a ser aplicada
*/
function tentry_new_mask(a,b){$(document).ready(function(){b=b.replace(/9/g,"0");var c=$("#"+a).attr("maxlength")>0?$("#"+a).attr("maxlength"):250;b=="A!"?b="A".repeat(c):b=="S!"?b="S".repeat(c):b=="0!"&&(b="0".repeat(c));$("#"+a).mask(b)})}
function tentry_mask(a,b,c){var e=a.value;if(typeof e=="undefined")return!0;$(a).attr("forceupper")=="1"&&(e=e.toUpperCase());$(a).attr("forcelower")=="1"&&(e=e.toLowerCase());keyCode=document.all?b.keyCode:b.which;if(keyCode==8||b.keyCode==9||b.keyCode==13)return!0;var k="";var d=0;var f=c.charAt(1)=="!"?a.value.length+1:c.length;for(b=0;b<f-1;b++)maskChar=c.charAt(b),valueChar=e.charAt(d),b<=e.length&&((maskChar=="-"||maskChar=="_"||maskChar=="."||maskChar=="/"||maskChar=="\\"||maskChar==":"||maskChar==
"|"||maskChar=="("||maskChar==")"||maskChar=="["||maskChar=="]"||maskChar=="{"||maskChar=="}")&maskChar!==valueChar?k+=maskChar:(k+=valueChar,d++));a.value=k;a=a.value.length;maskChar=c.charAt(1)=="!"?c.charAt(0):c.charAt(a);switch(maskChar){case "A":case "a":return keyCode>47&&keyCode<58||keyCode>64&&keyCode<91||keyCode>96&&keyCode<123;case "S":case "s":return keyCode>64&&keyCode<91||keyCode>96&&keyCode<123;case "9":return keyCode>47&&keyCode<58}return!0}
function tentry_upper(a){if(typeof a.value!=="undefined"){const b=a.selectionStart,c=a.selectionEnd;a.value=a.value.toUpperCase();a.setSelectionRange(b,c)}}function tentry_lower(a){if(typeof a.value!=="undefined"){const b=a.selectionStart,c=a.selectionEnd;a.value=a.value.toLowerCase();a.setSelectionRange(b,c)}}
function tentry_autocomplete(a,b,c){var e='input[name="'+a+'"]';$("#"+a).length>0&&(e="#"+a);c=Object.assign({lookup:b,onSelect:function(){var k=$(this).data("val"),d=$(this).val();$(this).data("val",d);$(e).removeAttr("onblur");k!==d&&$(e).attr("exitaction")&&(string_callback=$(e).attr("exitaction"),Function(string_callback)())}},JSON.parse(c));$(e).autocomplete(c)}function tentry_autocomplete_by_name(a,b,c){objectId=$("[name="+a+"]").attr("id");tentry_autocomplete(objectId,b,c)}
function tentry_numeric_mask(a,b,c,e,k,d){var f='input[name="'+a+'"]';$("#"+a).length>0&&(f="#"+a);$(f).maskMoney({prefix:"",suffix:"",affixesStay:!0,thousands:e,decimal:c,precision:b,allowZero:!0,allowNegative:d,formatOnBlur:k,reverse:k,bringCaretAtEndOnFocus:!k,selectAllOnFocus:!1,allowEmpty:!0})}
function tentry_get_data_by_id(a){var b=$("#"+a).data("nmask");if(typeof b!=="undefined"){var c=b.substring(1,2);b=b.substring(2,3);a=$("#"+a).val();a=a.split(b).join("");return a=a.split(c).join(".")}return $("#"+a).val()}function tentry_exit_on_enter(a){$("#"+a).bind("keypress",function(b){b.keyCode==13&&(b.preventDefault(),b.stopPropagation(),$(this).attr("data-enteraction")?Function($(this).attr("data-enteraction"))():document.getElementById(a).blur())})}
function tentry_change_mask(a,b,c){form_name_sel=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var e='[name="'+b+'"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(e="#"+b);$(document).ready(function(){c=c.replace(/9/g,"0");var k=$(e).attr("maxlength")>0?$(e).attr("maxlength"):250;c=="A!"?c="A".repeat(k):c=="S!"?c="S".repeat(k):c=="0!"&&(c="0".repeat(k));$(e).mask(c)})}
function tentry_toggle_visibility(a){$("#"+a+"-container").find("i").click(function(){var b=$(this),c=$(this).closest("div").find("input");b.toggleClass("fa-eye-slash");b.toggleClass("fa-eye");c.attr("type")=="text"?c.attr("type","password"):c.attr("type","text")})};function texpander_start(){$(".texpander-container").click(function(a){a.stopPropagation()})};function tfield_enable_field(a,b){try{$("form[name="+a+"] [name="+b+"]").attr("readonly",!1),$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled")}catch(c){console.log(c)}}function tfield_disable_field(a,b){try{$("form[name="+a+"] [name="+b+"]").attr("readonly",!0),$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled")}catch(c){console.log(c)}}function tfield_clear_field(a,b){try{$("form[name="+a+"] [name="+b+"]").val("")}catch(c){console.log(c)}}
function tfield_transfer_value(a,b,c){if($(a).attr("type")=="checkbox"){var e=$(a).attr("value"),k=$(a).closest(c).find(b).val();k=$(a).is(":checked")?k+e+",":k.replace(e+",","")}else k=$(a).val();$(a).closest(c).find(b).val(k)};function ttreeview_start(a,b){$(a).treeview({persist:"location",animated:"fast",collapsed:b})};function FileUploader(a,b,c,e,k,d,f,l,p){this.field_name=$("#"+a).attr("receiver");this.input_id=a;this.limitSize=p;this.service_action=c;this.parent_container=$("#"+b);this.complete_action=e;this.error_action=k;this.file_handling=d;this.image_gallery=JSON.parse(f);this.popover=JSON.parse(l);this.obj_file=document.getElementById(this.input_id);this.drop_zone=!1;var h=this;this.createStatusRow=function(){var g=h.parent_container.find("[widget=tfile]")[0],m=$(g).css("width"),q=$("<div />",{"class":"tfile_row_wrapper",
style:"display:none"});g=$("<div />",{"class":"tfile_row_1"});var v=$("<div />",{"class":"tfile_row_2"});m=$("<div />",{"class":"tfile_link_wrapper",style:"width: calc("+m+" - 25px)"});var w=$("<span />",{"class":"tfile_del_icon fa fa-minus-circle gray",title:"Remover"}),u=$("<div />",{"class":"progress-bar progress-bar-success",style:"width: 0%; height: 2px;"}),z=$("<input />",{type:"hidden",name:h.field_name,widget:"tfile"});h.image_gallery.enabled=="1"&&($(m).css("width","unset"),$(q).css("border",
"1px solid gray"),$(q).css("border-radius","3px"),$(q).css("margin","2px"));h.file_row_wrapper=q;h.file_input_hidden=z;h.file_progress_bar=u;h.file_link_wrapper=m;h.parent_container.children(".tfile_row_wrapper").remove();h.parent_container.append(q);q.append(g);q.append(v);g.append(z,m,w);v.append(u);$(w).click(function(){var A=h.getData();q.hide();h.parent_container.children("i").attr({"class":"",title:""});h.parent_container.find("[widget=tfile]").css("padding-left","5px");A.delFile=A.fileName;
A.delFile==A.newFile&&(A="");h.setData(A)});return q};this.clear=function(){h.file_row_wrapper&&h.file_row_wrapper.hide();h.parent_container.children("i").attr({"class":"",title:""});h.parent_container.find("[widget=tfile]").css("padding-left","5px");$(h.file_input_hidden).val("");$("#"+this.input_id).val("")};this.showFile=function(g){typeof g=="undefined"&&(g=this.getData());if(g=g.fileName){var m=h.file_row_wrapper,q=m.find(".tfile_link_wrapper");m.find(".progress-bar").css("width","100%");if($.inArray(g.split(".").pop().toLowerCase(),
"png jpg jpeg gif svg webp ico fav".split(" "))>-1){m='<img style="max-width:460px" src="download.php?file={file_name}">';h.popover.content&&(m=atob(h.popover.content));m=m.replace("{file_name}",g);if(h.image_gallery.enabled=="1"){var v=$("<a />",{href:"download.php?file="+g,target:"_blank"}),w=$("<img />",{src:"download.php?file="+g}).height(h.image_gallery.height).width(h.image_gallery.width);v.append(w)}else v=$("<a />",{href:"download.php?file="+g,target:"_blank"});h.popover.enabled=="1"&&v.popover({trigger:"hover",
content:m,html:!0,container:"body",template:'<div class="popover" role="tooltip" style="z-index:100000;max-width:800px"><div class="arrow"></div><h3 class="popover-title popover-header"></h3><div class="popover-content popover-body"><div class="data-content"></div></div></div>',title:h.popover.title||""})}else v=$("<a />",{href:"download.php?file="+g,target:"_blank"});h.file_row_wrapper.show();h.image_gallery.enabled!="1"&&v.append(g);q.html(v)}};this.getData=function(){var g=decodeURIComponent(h.file_input_hidden.val()),
m="";try{m=g?JSON.parse(g):{}}catch(q){m={}}return m};this.setData=function(g){h.clear();g&&$(h.file_input_hidden).val(encodeURIComponent(JSON.stringify(g)))};this.supportAjaxUploadWithProgress=function(){return this.supportFileAPI()&&this.supportAjaxUploadProgressEvents()&&this.supportFormData()};this.supportFileAPI=function(){var g=document.createElement("INPUT");g.type="file";return"files"in g};this.supportAjaxUploadProgressEvents=function(){var g=new XMLHttpRequest;return!!(g&&"upload"in g&&"onprogress"in
g.upload)};this.supportFormData=function(){return!!window.FormData};this.initFileUpload=function(){var g=new FormData,m=h.obj_file.files[0];g.append("fileName",m);if(h.limitSize&&m.size>h.limitSize)throw h.onLoadStart(),Error(_t("large_file")+h.limitSize/1024/1024+"MBs");this.supportAjaxUploadWithProgress()&&this.sendXHRequest(g,h.service_action)};this.sendXHRequest=function(g,m){var q=new XMLHttpRequest;q.upload.addEventListener("loadstart",this.onLoadStart,!1);q.upload.addEventListener("progress",
this.onProgress,!1);q.upload.addEventListener("load",this.onLoad,!1);q.addEventListener("readystatechange",this.onReadyStateChange,!1);q.open("POST",m,!0);q.send(g)};this.onLoadStart=function(g){h.parent_container.children("i").length==0&&h.parent_container.prepend($("<i>"));h.file_handling&&h.file_row_wrapper.show();h.parent_container.find("[widget=tfile]").css("padding-left","20px");h.parent_container.children("i").attr({"class":"fa fa-spinner fa-spin fa-fw blue file-response-icon",title:"..."})};
this.onLoad=function(g){};this.onProgress=function(g){g.lengthComputable&&h.file_handling&&(g=Math.round(g.loaded*100/g.total),h.file_progress_bar.css("width",g+"%").css("height",2),h.file_link_wrapper.html(g+"%"))};this.onReadyStateChange=function(g){var m=null;try{m=g.target.status}catch(u){return}if(m=="200"&&g.target.readyState=="4"&&g.target.responseText)try{var q=JSON.parse(g.target.responseText);if(q.type=="success"){if(h.file_handling){var v=h.getData();v.fileName&&(v.delFile=v.fileName);
v.newFile="tmp/"+q.fileName;v.fileName="tmp/"+q.fileName;h.setData(v);h.showFile(v)}else{var w=$("#"+h.input_id).parent().children("input[type=hidden]");$(w).val(q.fileName)}h.showMessage("success",_t("success"));this.readyState==4&&typeof h.complete_action=="function"&&h.complete_action()}else h.file_handling&&h.file_row_wrapper.remove(),typeof h.error_action=="function"&&h.error_action(),h.showMessage("error",q.msg)}catch(u){typeof h.error_action=="function"&&h.error_action(),h.file_handling&&h.file_row_wrapper.remove(),
typeof q=="undefined"?h.showMessage("error",g.target.responseText):h.showMessage("error",u)}};this.showMessage=function(g,m){h.parent_container.children("i").removeAttr("data-original-title");this.drop_zone?g=="success"?(g=_t("file_uploaded_successfully"),$(`#tfile_dropzone_info_${this.input_id}`).html(`
                    <div class="alert alert-success" role="alert">${g}</div>    
                `).delay(3E3).fadeOut("slow",function(){$(this).empty().show()})):g=="error"&&$(`#tfile_dropzone_info_${this.input_id}`).html(`
                    <div class="alert alert-danger" role="alert">${m}</div>    
                `):g=="success"?(h.parent_container.find("[widget=tfile]").css("padding-left","20px"),h.parent_container.children("i").attr({"class":"far fa-check-circle green file-response-icon","data-original-title":m})):g=="error"&&(h.parent_container.find("[widget=tfile]").css("padding-left","20px"),h.parent_container.children("i").attr({"class":"fa fa-exclamation-circle red file-response-icon","data-original-title":m}))};this.setValue=function(g){this.clear();if(g){var m={fileName:g};g.indexOf("%7B%")>=
0&&(m=JSON.parse(decodeURIComponent(g)));this.setData(m)}this.showFile()};this.enableDropZone=function(){this.drop_zone=!0;const g=$(`#tfile_dropzone_${this.input_id}`),m=$(`#${this.input_id}`);$(document).on("dragover drop",function(q){q.preventDefault()});g.on("dragover",function(q){q.preventDefault();q.stopPropagation()});g.on("dragleave",function(){g.css("border-color","#ccc")});g.on("drop",function(q){q.preventDefault();q.stopPropagation();g.css("border-color","#ccc");q=q.originalEvent.dataTransfer.files;
if(q.length>0){q=q[0];const v=new DataTransfer;v.items.add(q);m[0].files=v.files;m.trigger("change")}});g.on("click",function(){m.click()});m.on("change",function(){});$(document).on("click",".tfile_del_icon",function(){})}}
function tfile_start(a,b,c,e,k,d,f,l,p,h){$(function(){var g=new FileUploader(a,b,c,e,k,d,f,l,p,h);$("#"+a).change(function(){try{g.initFileUpload()}catch(q){g.clear(),g.showMessage("error",q.message),typeof this.error_action=="function"&&g.error_action()}});if(d){var m=$("#"+a).parent().children("input[type=hidden]");g.createStatusRow();$(m).val()&&g.setData(JSON.parse(decodeURIComponent($(m).val())));g.showFile();$(m).remove()}h&&g.enableDropZone();$('[name="'+g.field_name+'"]')[0].tfile=g})}
function tfile_send_data(a,b){b&&(b={fileName:b},a=$("#"+a).data("instance"),typeof a!="undefined"&&(a.setData(b),a.showFile()))}function tfile_enable_field(a,b){try{$("form[name="+a+"] [name=file_"+b+"]").removeAttr("disabled"),$("form[name="+a+"] [name=file_"+b+"]").removeClass("tfield_disabled").addClass("tfield")}catch(c){console.log(c)}}
function tfile_disable_field(a,b){try{$("form[name="+a+"] [name=file_"+b+"]").attr("disabled",!0),$("form[name="+a+"] [name=file_"+b+"]").removeClass("tfield").addClass("tfield_disabled")}catch(c){console.log(c)}}function tfile_clear_field(a,b){try{$("form[name="+a+"] [name="+b+"]").val(""),$("form[name="+a+"] [name=file_"+b+"]").val("")}catch(c){console.log(c)}}
function tfile_update_download_link(a){$("#view_"+a).length&&(value=$("[name="+a+"]").val(),$("#view_"+a).attr("href","download.php?file=tmp/"+value),$("#view_"+a).html("tmp/"+value))};function MultiFileUploader(a,b,c,e,k,d,f,l,p){this.field_name=$("#"+a).attr("receiver");this.obj_file=b;this.limitSize=p;this.service_action=c;this.complete_action=k;this.file_handling=d;this.image_gallery=JSON.parse(f);this.popover=JSON.parse(l);this.parent_container=$("#"+e);this.instances=[];this.messages=[];var h=this;this.createStatusRow=function(){var g=h.parent_container.find("[widget=tmultifile]")[0],m=$(g).css("width"),q=$("<div />",{"class":"tfile_row_wrapper tfile_row_wrapper-"+a});g=$("<div />",
{"class":"tfile_row_1"});var v=$("<div />",{"class":"tfile_row_2"});m=$("<div />",{"class":"tfile_link_wrapper",style:"width: calc("+m+" - 25px)"});var w=$("<span />",{"class":"tfile_del_icon fa fa-minus-circle gray",title:"Remover"}),u=$("<div />",{"class":"progress-bar progress-bar-success",style:"width: 0%; height: 2px;"}),z=$("<input />",{type:"hidden",name:h.field_name+"[]"});h.image_gallery.enabled=="1"&&($(m).css("width","unset"),$(q).css("border","1px solid gray"),$(q).css("border-radius",
"3px"),$(q).css("margin","2px"),$(q).css("display","inline-block"));h.file_row_wrapper=q;h.file_input_hidden=z;h.file_progress_bar=u;h.file_link_wrapper=m;h.parent_container.append(q);q.append(g);q.append(v);g.append(z,m,w);v.append(u);$(w).click(function(){var A=h.getData(z);q.hide();h.parent_container.children("i").attr({"class":"",title:""});h.parent_container.find("[widget=tmultifile]").css("padding-left","5px");A.delFile=A.fileName;A.delFile==A.newFile&&(A="",h.setData(A,z),q.remove());h.setData(A,
z)});return q};this.createInputHidden=function(g){g=$("<input />",{type:"hidden",name:h.field_name+"[]",widget:"thidden",value:g});h.parent_container.append(g);return g};this.showFile=function(g){typeof g=="undefined"&&(g=this.getData());if(g=g.fileName){var m=h.file_row_wrapper,q=m.find(".tfile_link_wrapper");m.find(".progress-bar").css("width","100%");if($.inArray(g.split(".").pop().toLowerCase(),"png jpg jpeg gif svg webp ico fav".split(" "))>-1){var v='<img style="max-width:460px" src="download.php?file={file_name}">';
h.popover.content&&(v=atob(h.popover.content));v=v.replace("{file_name}",g);if(h.image_gallery.enabled=="1"){m=$("<a />",{href:"download.php?file="+g,target:"_blank"});var w=$("<img />",{src:"download.php?file="+g}).height(h.image_gallery.height).width(h.image_gallery.width);m.append(w);h.popover.enabled=="1"&&q.popover({trigger:"hover",content:v,html:!0,container:"body",template:'<div class="popover" role="tooltip" style="z-index:100000;max-width:800px"><div class="arrow"></div><h3 class="popover-title popover-header"></h3><div class="popover-content popover-body"><div class="data-content"></div></div></div>',
title:h.popover.title||""})}else m=$("<a />",{href:"download.php?file="+g,target:"_blank"}),h.popover.enabled=="1"&&m.popover({trigger:"hover",content:v,html:!0,container:"body",template:'<div class="popover" role="tooltip" style="z-index:100000;max-width:800px"><div class="arrow"></div><h3 class="popover-title popover-header"></h3><div class="popover-content popover-body"><div class="data-content"></div></div></div>',title:h.popover.title||""})}else h.image_gallery.enabled=="1"?(m=$("<a />",{href:"download.php?file="+
g,target:"_blank"}),v=this.getFileIcon(g),w=$("<i />",{"class":v,style:"font-size: "+Math.min(h.image_gallery.height,h.image_gallery.width)+"px; color: #666; display: flex; align-items: center; justify-content: center; height: "+h.image_gallery.height+"px; width: "+h.image_gallery.width+"px;"}),m.append(w),h.popover.enabled=="1"&&m.popover({trigger:"hover",content:'<div style="text-align: center; padding: 20px;"><i class="'+v+'" style="font-size: 48px; color: #666; margin-bottom: 10px;"></i><br><strong>'+
g+"</strong></div>",html:!0,container:"body",template:'<div class="popover" role="tooltip" style="z-index:100000;max-width:800px"><div class="arrow"></div><h3 class="popover-title popover-header"></h3><div class="popover-content popover-body"><div class="data-content"></div></div></div>',title:h.popover.title||"Arquivo"})):m=$("<a />",{href:"download.php?file="+g,target:"_blank"});h.image_gallery.enabled!="1"&&m.append(g);q.html(m)}};this.getFileIcon=function(g){return{pdf:"fas fa-file-pdf",doc:"fas fa-file-word",
docx:"fas fa-file-word",xls:"fas fa-file-excel",xlsx:"fas fa-file-excel",ppt:"fas fa-file-powerpoint",pptx:"fas fa-file-powerpoint",txt:"fas fa-file-alt",rtf:"fas fa-file-alt",html:"fas fa-file-code",css:"fas fa-file-code",js:"fas fa-file-code",php:"fas fa-file-code",py:"fas fa-file-code",java:"fas fa-file-code",cpp:"fas fa-file-code",c:"fas fa-file-code",xml:"fas fa-file-code",json:"fas fa-file-code",mp3:"fas fa-file-audio",wav:"fas fa-file-audio",flac:"fas fa-file-audio",aac:"fas fa-file-audio",
ogg:"fas fa-file-audio",mp4:"fas fa-file-video",avi:"fas fa-file-video",mkv:"fas fa-file-video",mov:"fas fa-file-video",wmv:"fas fa-file-video",flv:"fas fa-file-video",zip:"fas fa-file-archive",rar:"fas fa-file-archive","7z":"fas fa-file-archive",tar:"fas fa-file-archive",gz:"fas fa-file-archive",csv:"fas fa-file-csv",exe:"fas fa-cog",dmg:"fas fa-hdd",iso:"fas fa-hdd"}[g.split(".").pop().toLowerCase()]||"fas fa-file"};this.getData=function(g){g=typeof g=="undefined"?decodeURIComponent(h.file_input_hidden.val()):
decodeURIComponent(g.val());var m="";try{m=g?JSON.parse(g):{}}catch(q){m={}}return m};this.setData=function(g,m){typeof m=="undefined"&&(m=h.file_input_hidden);g?$(m).val(encodeURIComponent(JSON.stringify(g))):$(m).val("")};this.supportAjaxUploadWithProgress=function(){return this.supportFileAPI()&&this.supportAjaxUploadProgressEvents()&&this.supportFormData()};this.supportFileAPI=function(){var g=document.createElement("INPUT");g.type="file";return"files"in g};this.supportAjaxUploadProgressEvents=
function(){var g=new XMLHttpRequest;return!!(g&&"upload"in g&&"onprogress"in g.upload)};this.supportFormData=function(){return!!window.FormData};this.initFileUpload=function(){var g=new FormData,m=h.obj_file;g.append("fileName",m);if(h.limitSize&&(this.onLoadStart(),m.size>h.limitSize))throw Error(_t("large_file")+h.limitSize/1024/1024+"MBs");this.createStatusRow();this.supportAjaxUploadWithProgress()&&this.sendXHRequest(g,h.service_action)};this.sendXHRequest=function(g,m){var q=new XMLHttpRequest;
q.upload.addEventListener("loadstart",this.onLoadStart,!1);q.upload.addEventListener("progress",this.onProgress,!1);q.upload.addEventListener("load",this.onLoad,!1);q.addEventListener("readystatechange",this.onReadyStateChange,!1);q.open("POST",m,!0);q.send(g)};this.onLoadStart=function(g){h.parent_container.children("i").length==0&&h.parent_container.prepend($("<i>"));h.parent_container.find("[widget=tmultifile]").css("padding-left","20px");h.parent_container.children("i").attr({"class":"fa fa-spinner fa-spin fa-fw blue file-response-icon",
"data-original-title":"...",title:"..."})};this.onLoad=function(g){};this.onProgress=function(g){g.lengthComputable&&(g=Math.round(g.loaded*100/g.total),h.file_progress_bar.css("width",g+"%").css("height",2),h.file_link_wrapper.html(g+"%"))};this.onReadyStateChange=function(g){var m=null;try{m=g.target.status}catch(w){return}if(m=="200"&&g.target.readyState=="4"&&g.target.responseText)try{var q=JSON.parse(g.target.responseText);if(q.type=="success"){if(h.file_handling){var v=h.getData();v.newFile=
"tmp/"+q.fileName;v.fileName="tmp/"+q.fileName;h.setData(v);h.showFile(v)}else h.file_input_hidden.val(q.fileName),h.file_link_wrapper.html(q.fileName);h.showMessage("success",_t("success"));this.readyState==4&&typeof h.complete_action=="function"&&h.complete_action()}else h.file_row_wrapper.remove(),h.showMessage("error",q.msg)}catch(w){h.file_row_wrapper.remove(),typeof q=="undefined"?h.showMessage("error",g.target.responseText):h.showMessage("error",w)}};this.showMessage=function(g,m){h.parent_container.children("i").removeAttr("data-original-title");
h.messages.length>0?(g!="success"?h.messages.push(m):h.messages.push("success"),g=h.messages.filter(q=>q=="success").length>0?"fa fa-info-circle blue":"fa fa-exclamation-circle red",h.parent_container.find("[widget=tmultifile]").css("padding-left","20px"),h.parent_container.children("i").attr({"class":g+" file-response-icon",title:h.messages.filter(q=>q!="success").join(", "),"data-original-title":h.messages.filter(q=>q!="success").join(", ")})):g=="success"?(h.parent_container.find("[widget=tmultifile]").css("padding-left",
"20px"),h.parent_container.children("i").attr({"class":"far fa-check-circle green file-response-icon",title:m,"data-original-title":m})):(h.messages.push(m),h.parent_container.find("[widget=tmultifile]").css("padding-left","20px"),h.parent_container.children("i").attr({"class":"fa fa-exclamation-circle red file-response-icon",title:m,"data-original-title":m}))};this.clear=function(){$(".tfile_row_wrapper-"+a).each(function(){$(this).find("input").each(function(){$(this).val("")});$(this).remove()});
h.parent_container.children("i").attr({"class":"",title:""});h.parent_container.find("[widget=tmultifile]").css("padding-left","5px");$('[name="file_'+this.field_name+'[]"]').val("");$(this.file_input_hidden).val("");$("#"+this.input_id).val("")};this.setValue=function(g){this.clear();if(g){try{g=JSON.parse(g)}catch(w){}for(var m in g){var q=g[m],v={idFile:m,fileName:q};q.indexOf("%7B%")>=0&&(v=JSON.parse(decodeURIComponent(q)));this.file_handling?(q=this.createStatusRow(),typeof v.delFile!="undefined"&&
q.hide(),this.setData(v),this.showFile()):this.createInputHidden(q)}}};this.updateValueInfo=function(){var g=new DataTransfer,m=h.instances.map(q=>q.obj_file);for(let q=0;q<m.length;q++)g.items.add(m[q]);$("#"+a)[0].files=g.files};this.addInstance=function(g){this.instances.push(g)}}
function tmultifile_start(a,b,c,e,k,d,f,l){var p=new MultiFileUploader(a,null,c,b,e,k,d,f,l);$(function(){$("#"+a).change(function(){p.messages=[];$.each($(this).prop("files"),function(h,g){h=new MultiFileUploader(a,g,c,b,e,k,d,f,l);h.messages=p.messages;try{h.initFileUpload(),p.addInstance(h)}catch(m){h.showMessage("error",h.obj_file.name+": "+m.message)}});p.updateValueInfo()});k&&$("#"+a).parent().children("input[type=hidden]").each(function(h,g){h=new MultiFileUploader(a,null,c,b,e,k,d,f,l);h.createStatusRow();
$(g).val()&&h.setData(JSON.parse(decodeURIComponent($(g).val())));h.showFile();$(g).remove();p.addInstance(h)});$("#"+a)[0].tmultifile=p})}function tmultifile_enable_field(a,b){try{$("form[name="+a+"] [name='file_"+b+"[]']").removeAttr("disabled"),$("form[name="+a+"] [name='file_"+b+"[]']").removeClass("tfield_disabled").addClass("tfield")}catch(c){console.log(c)}}
function tmultifile_disable_field(a,b){try{$("form[name="+a+"] [name='file_"+b+"[]']").attr("disabled",!0),$("form[name="+a+"] [name='file_"+b+"[]']").removeClass("tfield").addClass("tfield_disabled")}catch(c){console.log(c)}}function tmultifile_clear_field(a,b){try{$("form[name="+a+"] [name='"+b+"[]']").val(""),$("form[name="+a+"] [name='file_"+b+"[]']").val("")}catch(c){console.log(c)}};function thtmleditor_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").next().find(".note-editable").attr("contenteditable",!0)},1)}function thtmleditor_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").next().find(".note-editable").attr("contenteditable",!1)},1)}function thtmleditor_clear_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").code("")},1)}
function thtmleditor_get_length(a){a=a.replace(/(<p><br><\/p>)/ig," ");a=a.replace(/(<([^>]+)>)/ig,"");a=a.replace(/(&nbsp;)/ig," ");return a.length}function thtmleditor_insert_text(a,b,c){$("form[name="+a+"] [name="+b+"]").summernote("editor.saveRange");$("form[name="+a+"] [name="+b+"]").summernote("editor.restoreRange");$("form[name="+a+"] [name="+b+"]").summernote("editor.focus");$("form[name="+a+"] [name="+b+"]").summernote("editor.insertText",c)}
function thtmleditor_start(a,b,c,e,k,d){k=Object.assign({dialogsInBody:!0,fontSizes:"8 9 10 11 12 14 18 24 36 48 64 82 150".split(" "),width:b,height:c,lang:e,toolbar:[["undoredo",["undo","redo"]],["style",["style","bold","italic","underline","clear"]],["font",["fontname","fontsize","color"]],["para",["ul","ol","paragraph","height"]],["insert",["table","link","picture","hr"]],["view",["fullscreen","codeview","help"]]]},JSON.parse(k));if(d){b=JSON.parse(d);k.buttons={};e=[];for(const f of b)e.push(["mybutton_"+
f.name,[f.name]]),k.buttons[f.name]=function(l){return $.summernote.ui.button({contents:base64_decode(f.icon)+(f.showLabel?base64_decode(f.title):""),tooltip:f.showLabel?null:base64_decode(f.title),click:function(){eval("((param) => ("+base64_decode(f.function)+")(param))(context)")}}).render()};k.toolbar.push(...e)}typeof k.completion!=="undefined"&&(typeof summernote_wordlist=="undefined"&&(summernote_wordlist={}),summernote_wordlist[a]=k.completion,k.hint={match:/\b(\w{1,})$/,search:function(f,
l){l($.grep(summernote_wordlist[a],function(p){return p.indexOf(f)===0}))}});k.airMode==1&&setTimeout(function(){$("#"+a).parent().find(".note-editable").height(c+"px").css("overflow","auto")},1);k.maxlength&&k.maxlength>0&&(k.callbacks={onKeydown:function(f){thtmleditor_get_length($(f.currentTarget).html())+1>k.maxlength&&([8,33,34,35,36,37,38,39,40,45,46].includes(f.keyCode)||f.preventDefault())},onKeyup:function(f){f=thtmleditor_get_length($(f.currentTarget).html());$("#"+a).next(".note-editor").find(".counter").html(f+
"/"+k.maxlength)},onPaste:function(f){f.preventDefault()}});$("#"+a).summernote(k);k.maxlength&&k.maxlength>0&&(b=$("#"+a).parent().find(".note-editable").html(),b=thtmleditor_get_length(b),$("#"+a).next(".note-editor").append('<small style="position:absolute;bottom:10px;right:4px;" class="counter">'+b+"/"+k.maxlength+"</small>"));typeof $("#"+a).next(".note-editor")[0]!=="undefined"&&(b=$("#"+a).next(".note-editor")[0],$(b).css("margin",$("#"+a).css("margin")))}
function thtml_editor_reload_completion(a,b){objectId=$("[name="+a+"]").attr("id");setTimeout(function(){summernote_wordlist[objectId]=b},1)};function tmenubar_start(){$(document).ready(function(){$(".dropdown-toggle").dropdown()})};function tmultisearch_start(a,b,c,e,k,d,f,l,p,h,g){b={minimumInputLength:b,maximumSelectionLength:c,selectionTitleAttribute:g,allowClear:l,placeholder:e,multiple:k,minimumResultsForSearch:p,id:function(m){return m.id+"::"+m.text},templateResult:function(m){return/<[a-z][\s\S]*>/i.test(m.text)?$("<span>"+m.text+"</span>"):m.text},templateSelection:function(m){return/<[a-z][\s\S]*>/i.test(m.text)?$("<span>"+m.text+"</span>"):m.text}};k!=="1"&&delete b.maximumSelectionLength;$("#"+a).select2(b).on("select2:unselecting",
function(){$(this).data("unselecting",!0)}).on("select2:opening",function(m){$(this).data("unselecting")&&($(this).removeData("unselecting"),m.preventDefault())});if(typeof h!="undefined")$("#"+a).on("change",function(m){h()});parseInt(c)!==1&&($("#"+a).parent().find(".select2-selection").height(f),$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").height(f),$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").css("overflow-y","auto"))}
function tmultisearch_clear_field(a,b){try{$("form[name="+a+'] [name="'+b+'[]"]').val("").trigger("change"),$("form[name="+a+'] [name="'+b+'"]').val("").trigger("change")}catch(c){console.log(c)}}function tmultisearch_enable_field(a,b){try{$("form[name="+a+'] [name="'+b+'"]').length>0?$("form[name="+a+'] [name="'+b+'"]').next(".select2").find(".select2-disable").remove():$("form[name="+a+'] [name="'+b+'[]"]').next(".select2").find(".select2-disable").remove()}catch(c){console.log(c)}}
function tmultisearch_disable_field(a,b,c){c||="";try{$("form[name="+a+'] [name="'+b+'"]').length>0?$("form[name="+a+'] [name="'+b+'"]').next(".select2").prepend('<div title="'+c+'" class="select2-disable"></div>'):$("[form="+a+'] [name="'+b+'"]').length>0?$("[form="+a+'] [name="'+b+'"]').next(".select2").prepend('<div title="'+c+'" class="select2-disable"></div>'):$("form[name="+a+'] [name="'+b+'[]"]').next(".select2").prepend('<div title="'+c+'" class="select2-disable"></div>')}catch(e){console.log(e)}}
$.fn.select2.amd.require(["select2/selection/search"],function(a){var b=a.prototype.searchRemoveChoice;a.prototype.searchRemoveChoice=function(){b.apply(this,arguments);this.$search.val("")}});$.fn.select2.amd.require(["select2/selection/single"],function(a){var b=a.prototype.update;a.prototype.update=function(c){b.apply(this,Array.prototype.slice.apply(arguments));this.$selection.find(".select2-selection__rendered").removeAttr("title")}});
$.fn.select2.amd.require(["select2/selection/multiple"],function(a){var b=a.prototype.update;a.prototype.update=function(c){b.apply(this,Array.prototype.slice.apply(arguments));this.options.get("selectionTitleAttribute")===!1&&this.$selection.find(".select2-selection__rendered").find(".select2-selection__choice").removeAttr("title")}});$(document).on("select2:open",()=>{let a=document.querySelectorAll(".select2-container--open .select2-search__field");a[a.length-1].focus()});function tmultientry_start(a,b,c,e,k){b={tags:!0,maximumSelectionLength:b,width:c,height:e,tokenSeparators:[",",";"]};if(typeof k!="undefined")$("#"+a).on("change",function(d){k()});$("#"+a).select2(b);$("#"+a).parent().find(".select2-selection").height(e);$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").height(e);$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").css("overflow-y","auto")};function tdbuniquesearch_set_value(a,b,c,e){Adianti.formEventsCounter++;setTimeout(function(){var k=b.substr(0,1)=="#"?$(b):$("form[name="+a+"] [name="+b+"]"),d=k.data("select2").options.options.hash;d=k.data("select2").options.options.ajax.url+"&hash="+d+"&value="+c+"&onlyidsearch=1";$.ajax({url:d,dataType:"json"}).done(function(f){if(Array.isArray(f.result))if(f.result.length>0){var l=f.result[0].split("::");k.find("option[value='"+l[0]+"']").length||k.append(new Option(l[1],l[0],!0,!0));c==""?
k.val("").trigger("change.select2"):(f=[],f.push(l[0]),k.val(f).trigger("change.select2"));typeof e=="function"&&e()}else k.val("").trigger("change.select2");else k.val("").trigger("change.select2");Adianti.formEventsCounter--}).fail(function(f,l,p){Adianti.formEventsCounter--;__adianti_error("Error",l+": connection failed")})},1)};function tdbmultisearch_start(a,b,c,e,k,d,f,l,p,h,g){b={escapeMarkup:function(m){return m},minimumInputLength:b,maximumSelectionLength:c,allowClear:!0,selectionTitleAttribute:g,placeholder:e,multiple:k,hash:p,id:function(m){return m.id+"::"+m.text},templateResult:function(m){return/<[a-z][\s\S]*>/i.test(m.text)?$("<span>"+m.text+"</span>"):m.text},templateSelection:function(m){return/<[a-z][\s\S]*>/i.test(m.text)?$("<span>"+m.text+"</span>"):m.text},ajax:{url:d,dataType:"json",delay:250,data:function(m,
q){return{value:m.term,hash:p}},processResults:function(m,q){var v=[];$(m.result).each(function(w){w=this.split("::");v.push({id:w[0],text:w[1]})});return{results:v}}}};k!=="1"&&delete b.maximumSelectionLength;select2_prepare_no_results(b,"#"+a);$("#"+a).select2(b).on("select2:unselecting",function(){$(this).data("unselecting",!0)}).on("select2:opening",function(m){$(this).data("unselecting")&&($(this).removeData("unselecting"),m.preventDefault())});if(typeof h!="undefined")$("#"+a).on("change",function(m){h()});
parseInt(c)!==1&&($("#"+a).parent().find(".select2-selection").height(l),$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").height(l),$("#"+a).parent().find(".select2-selection").find(".select2-selection__rendered").css("overflow-y","auto"))}
function tdbmultisearch_set_value(a,b,c,e){Adianti.formEventsCounter++;setTimeout(function(){var k=b.substr(0,1)=="#"?$(b):$("form[name="+a+'] [name="'+b+'[]"]'),d=k.data("select2").options.options.hash;d=k.data("select2").options.options.ajax.url+"&hash="+d+"&value="+c+"&operator_idsearch=in&onlyidsearch=1&jsonvalue=1";$.ajax({url:d,dataType:"json"}).done(function(f){if(Array.isArray(f.result))if(f.result.length>0){var l=[];for(const p of f.result)f=p.split("::"),l.push(f[0]),k.find("option[value='"+
f[0]+"']").length||k.append(new Option(f[1],f[0],!0,!0));c==""||c=="[]"?k.val("").trigger("change.select2"):k.val(l).trigger("change.select2");typeof e=="function"&&e()}else k.val("").trigger("change.select2");else k.val("").trigger("change.select2");Adianti.formEventsCounter--}).fail(function(f,l,p){Adianti.formEventsCounter--;__adianti_error("Error",l+": connection failed")})},1)};function tradiogroup_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").attr("onclick",null);$("form[name="+a+"] [name="+b+"]").css("pointer-events","auto");$("form[name="+a+"] [name="+b+"]").closest(".toggle-wrapper").removeClass("tfield_block_events")},1)}
function tradiogroup_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").attr("onclick","return false");$("form[name="+a+"] [name="+b+"]").css("pointer-events","none");$("form[name="+a+"] [name="+b+"]").closest(".toggle-wrapper").addClass("tfield_block_events")},1)}function tradiogroup_clear_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").attr("checked",!1)},1)}function tradiogroup_reload(a,b,c){$("form[name="+a+"] [tradiogroup="+b+"]").replaceWith(c)};function tseekbutton_enable_field(a,b){try{$("form[name="+a+"] [name="+b+"]").attr("readonly",!1),$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled").addClass("tseekentry")}catch(c){console.log(c)}setTimeout(function(){$("form[name="+a+"] [for="+b+"]").show()},1)}
function tseekbutton_disable_field(a,b){try{$("form[name="+a+"] [name="+b+"]").attr("readonly",!0),$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled").removeClass("tseekentry")}catch(c){console.log(c)}setTimeout(function(){$("form[name="+a+"] [for="+b+"]").hide()},1)};function tlabel_toggle_visibility(a){$("#"+a).find("i").on("click",function(b){b=$(this).prev();b.css("filter")==="none"?(b.css("filter","blur(5px)"),$(this).switchClass("fa-eye","fa-eye-slash")):(b.css("filter",""),$(this).switchClass("fa-eye-slash","fa-eye"))})};function tselect_enable_field(a,b){form_name_sel=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var c='[name="'+b+'[]"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(c="#"+b);try{$(form_name_sel+c).attr("role")=="tselectsearch"?tmultisearch_enable_field(a,b):($(form_name_sel+c).attr("onclick",null),$(form_name_sel+c).css("pointer-events","auto"),$(form_name_sel+c).removeClass("tcombo_disabled"))}catch(e){console.log(e)}}
function tselect_disable_field(a,b){form_name_sel=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var c='[name="'+b+'[]"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(c="#"+b);try{$(form_name_sel+c).attr("role")=="tselectsearch"?tmultisearch_disable_field(a,b):($(form_name_sel+c).attr("onclick","return false"),$(form_name_sel+c).attr("tabindex","-1"),$(form_name_sel+c).css("pointer-events","none"),$(form_name_sel+c).addClass("tcombo_disabled"))}catch(e){console.log(e)}}
function tselect_clear_field(a,b){try{$("form[name="+a+'] [name="'+b+'[]"]').val("")}catch(c){console.log(c)}}function tselect_create_opt_group(a,b,c){a=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var e='[name="'+b+'[]"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(e="#"+b);$('<optgroup label="'+c+'"></optgroup>').appendTo(a+e)}
function tselect_add_option(a,b,c,e){c=c.replace(/"/g,"");a=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var k='select[name="'+b+'[]"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(k="#"+b);b=$(a+k).find("optgroup");b.length>0?$('<option value="'+c+'">'+e+"</option>").appendTo(b.last()):$('<option value="'+c+'">'+e+"</option>").appendTo(a+k)}
function tselect_clear(a,b,c){typeof c=="undefined"&&(c=!0);a=typeof a!="undefined"&&a!=""?'form[name="'+a+'"] ':"";var e='[name="'+b+'[]"]';b.indexOf("[")==-1&&$("#"+b).length>0&&(e="#"+b);b=$(a+e);b.val(!1);b.html("");c&&b.attr("changeaction")&&tform_events_hang_exec(b.attr("changeaction"))}
function tselect_enable_search(a,b){$(a).removeAttr("onchange");$(a).select2({allowClear:!0,multiple:!0,placeholder:b,templateResult:function(c){return/<[a-z][\s\S]*>/i.test(c.text)?$("<span>"+c.text+"</span>"):c.text},templateSelection:function(c){return/<[a-z][\s\S]*>/i.test(c.text)?$("<span>"+c.text+"</span>"):c.text}}).on("change",function(c){(new Function($(a).attr("changeaction")))()})};function tslider_start(a,b,c,e,k){b=$(a).val();$(a).wrap('<div class="tslidercontainer">');$(a).before('<div class="label">'+b+"</div>");var d;$(a).on("input",function(){$(a).parent().find(".label").html(this.value);$(a).attr("changeaction")&&(clearTimeout(d),d=setTimeout(function(){(new Function($(a).attr("changeaction")))()},300))})}
function tslider_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").css("pointer-events","auto");$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled")},1)}function tslider_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").css("pointer-events","none");$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled")},1)};function tsortlist_start(a,b,c,e){$(a).sortable({connectWith:b,tolerance:"pointer",start:function(k,d){d.item.data("index",d.item.index());d.item.data("parenta",this.id)},receive:function(k,d){e>0&&$(this).children().length>e?$(d.sender).sortable("cancel"):(k=$(this),targetListName=this.getAttribute("itemname"),document.getElementById(d.item.attr("id")+"_input").name=targetListName+"[]",d.item.css("display")!==k.attr("itemdisplay")&&(d.item.css("display",k.attr("itemdisplay")),detached=d.item.detach(),
$(k).append(detached)))},deactivate:c}).disableSelection()}function tsortlist_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [itemname="+b+"]").sortable("enable")},1)}function tsortlist_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [itemname="+b+"]").sortable("disable")},1)}function tsortlist_clear_field(a,b){setTimeout(function(){$("form[name="+a+"] [itemname="+b+"]").empty()},1)}
function tsortlist_add_item_field(a,b,c,e,k){var d=document.createElement("li"),f=document.createElement("label"),l=document.createElement("input");f.setAttribute("style","width: 100%;");d.setAttribute("class","tsortlist_item btn btn-default ui-sortable-handle");d.setAttribute("style","display: block; height: auto;");d.setAttribute("id","tsortlist_"+b+"_item_"+k+"_li");f.innerHTML=e;l.setAttribute("id","tsortlist_"+b+"_item_"+k+"_li_input");l.setAttribute("name",b+"[]");l.setAttribute("value",c);
l.setAttribute("type","hidden");d.appendChild(f);d.appendChild(l);setTimeout(function(){$("form[name="+a+"] [itemname="+b+"]").append(d)},1)};function tspinner_start(a,b,c){var e=c?"tstepper":"";$(a).wrap('<div class="input-group spinner '+e+'" data-trigger="spinner">');c?($(a).before('<a href="javascript:;" class="spin-minus" data-spin="down"><i class="fa fa-minus"></i></a>'),$(a).after('<a href="javascript:;" class="spin-plus" data-spin="up"><i class="fa fa-plus"></i></a>')):$(a).after('<div class="input-group-addon"> <a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a> <a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a> </div>');
$(a).parent().spinner("changing",function(k,d,f){$(a).attr("exitaction")&&(new Function($(a).attr("exitaction")))();typeof b=="function"&&b()})}function tspinner_enable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").parent().css("pointer-events","auto");$("form[name="+a+"] [name="+b+"]").removeClass("tfield_disabled");$("form[name="+a+"] [name="+b+"]").removeAttr("readonly")},1)}
function tspinner_disable_field(a,b){setTimeout(function(){$("form[name="+a+"] [name="+b+"]").parent().css("pointer-events","none");$("form[name="+a+"] [name="+b+"]").addClass("tfield_disabled");$("form[name="+a+"] [name="+b+"]").attr("readonly",!0)},1)};function tfullcalendar_start(a,b,c,e,k,d,f,l,p,h,g,m,q,v,w,u){var z=0,A=0;d.failure=function(B){__adianti_failure_request(B.xhr,B.xhr.status,B.xhr.statusText)};b={headerToolbar:{left:"prev,next today",center:"title",right:"timeGridDay,timeGridWeek,dayGridMonth,listWeek"},locale:k,themeSystem:"bootstrap",hiddenDays:m,initialDate:e,initialView:c,allDaySlot:!1,datesSet:function(B,G){setTimeout(function(){__adianti_process_popover()},100)},slotMinTime:h,slotMaxTime:g,slotLabelFormat:{hour12:!1,hour:"2-digit",
minute:"2-digit"},eventTimeFormat:{hour12:!1,hour:"2-digit",minute:"2-digit"},editable:b,dayMaxEventRows:!0,events:d,eventDurationEditable:v,eventStartEditable:q,eventDisplay:"block",eventSourceSuccess:function(B){setTimeout(__adianti_process_popover,1500);return B.eventArray},eventContent:function(B){return{html:'<div class="fc-event-time">'+B.timeText+'</div><div class="fc-event-title-container"> <div class="fc-event-title fc-sticky">'+B.event.title+"</div> </div>"}},dateClick:function(B){if(f!==
""&&z==0&&A==0){var G=B.allDay?B.dateStr:moment(B.date).format("YYYY-MM-DD HH:mm:ss");__adianti_load_page(f+"&date="+G+"&view="+B.view.type)}},eventClick:function(B){l!==""&&z==0&&A==0&&__adianti_load_page(l+"&id="+B.event.id+"&key="+B.event.id+"&view="+B.view.type)},eventDragStart:function(){z=1},eventDragStop:function(){z=0},eventDrop:function(B){p!==""&&__adianti_ajax_exec(p+"&id="+B.event.id+"&key="+B.event.id+"&start_time="+moment(B.event.start).format("YYYY-MM-DD HH:mm:ss")+"&end_time="+moment(B.event.end).format("YYYY-MM-DD HH:mm:ss"))},
eventResizeStart:function(){A=1},eventResizeStop:function(){A=0},eventResize:function(B){p!==""&&__adianti_ajax_exec(p+"&id="+B.event.id+"&key="+B.event.id+"&start_time="+moment(B.event.start).format("YYYY-MM-DD HH:mm:ss")+"&end_time="+moment(B.event.end).format("YYYY-MM-DD HH:mm:ss"))}};u&&(u=($(document).innerHeight()??0)-($("html nav.navbar").innerHeight()??0)-($(".adianti_tabs_container").innerHeight()??0)-$("#adianti_div_content").innerHeight()-($("footer.main-footer").innerHeight()??0)-40,u=
Math.max(u,325),b.expandRows=!0,b.height=`${u}px`);w=Object.assign(b,JSON.parse(w));u=$("#"+a)[0];var E=new FullCalendar.Calendar(u,w);E.render();(new ResizeObserver(function(){E.render()})).observe(u);$("#"+a).data("fullcalendar",E)};function ticonview_contextmenu_start(a){$("#"+a).contextmenu(function(b){$(".dropdown-iconview").hide();var c=$("#"+a).next("ul");c.css("left",ticonview_mouseX(b,$("#"+a)));c.css("top",ticonview_mouseY(b,$("#"+a)));c.show();b.preventDefault()});return!1}function ticonview_bind_click(){$(document).bind("click",function(a){$(".dropdown-iconview").hide()})}
function ticonview_mouseX(a,b){var c=0;$(b).closest(".ui-dialog").length>0&&(c=$(b).closest(".ui-dialog").offset().left);return a.pageX?a.pageX-c:a.clientX?a.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)-c:null}
function ticonview_mouseY(a,b){var c=0;$(b).closest(".ui-dialog").length>0&&(c=$(b).closest(".ui-dialog").offset().top+50);return a.pageY?a.pageY-c:a.clientY?a.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)-c:null}
function ticonview_move_start(a,b,c,e){$("#"+a+" li"+c).draggable({zIndex:1E5,cursor:"pointer",start:function(k,d){$(this).css("opacity",.5);$(this).addClass("iconview-drag")},stop:function(k,d){$(this).css("opacity",1)},revert:function(k,d){$(this).data("uiDraggable").originalPosition={top:0,left:0};return!k}});$("ul.ticonview li"+e).droppable({accept:".iconview-drag",drop:function(k,d){k=$(d.draggable).data();d=$(this).data();var f={},l;for(l in k)!k.hasOwnProperty(l)||typeof k[l]!="string"&&typeof k[l]!=
"number"||(f["source_"+l]=k[l]);for(l in d)!d.hasOwnProperty(l)||typeof d[l]!="string"&&typeof d[l]!="number"||(f["target_"+l]=d[l]);__adianti_load_page(b+"&"+$.param(f))},over:function(k,d){$(this).addClass("ui-over").addClass($(this).attr("id"))},out:function(k,d){$(this).removeClass("ui-over")}})};function kanban_start_board(a,b){$("#"+a).sortable({revert:200,placeholder:"kanban-stage-placeholder",forcePlaceholderSize:!0,helper:function(c,e){return $(e).clone().addClass("kanban-dragging")},start:function(c,e){e.item.show().addClass("kanban-ghost")},stop:function(c,e){e.item.show().removeClass("kanban-ghost")},update:function(c,e){c=$(e.item).attr("stage_id");var k=[];$(".kanban-stage").each(function(){k.push($(this).attr("stage_id"))});e=k.join("&order[]=");__adianti_load_page(b+"&key="+c+
"&id="+c+"&stage_id="+c+"&order[]="+e)},cursor:"move",tolerance:"pointer",cancel:".kanban-stage-actions, .kanban-item, .kanban-shortcuts"})}
function kanban_start_item(a,b){$("."+a).sortable({revert:200,placeholder:"kanban-item-placeholder",forcePlaceholderSize:!0,connectWith:".kanban-item-sortable",helper:function(c,e){return $(e).clone().addClass("kanban-dragging")},start:function(c,e){e.item.show().addClass("kanban-ghost")},stop:function(c,e){e.item.show().removeClass("kanban-ghost")},update:function(c,e){if(b&&this===e.item.parent()[0]){c=$(e.item).attr("item_id");e=$(this).attr("stage_id");var k=[];$("[stage_id="+e+"] .kanban-item").each(function(){k.push($(this).attr("item_id"))});
var d=k.indexOf("");d!==-1&&k.splice(d,1);d=k.join("&order[]=");__adianti_load_page(b+"&key="+c+"&id="+c+"&stage_id="+e+"&order[]="+d)}},cursor:"move",tolerance:"pointer",cancel:".kanban-item-content, .kanban-item-actions"})}
function kanban_start_load_more(a,b){$.each($("#"+a+" .kanban-stage .kanban-item-sortable"),function(c,e){var k=!0;e.onscroll=d=>{if(k){d=e.getAttribute("stage_id");var f=$(".kanban-board [stage_id="+d+"] .kanban-item").length;if(e.scrollTop+e.offsetHeight>=e.scrollHeight-20)return k=!1,__adianti_load_page(b+"&static=1&key="+d+"&offset="+f,function(){k=!0}),!1}}})}
function kanban_start_minimap(a){var b=!1;$("#"+a).closest(".kanban-board-wrapper").on("scroll",function(c){if(b)return!1;c=$(this).scrollLeft();var e=$(this).width(),k=$("#"+a).width();c=c/(k-e)*100;c*=($("#"+a+" #tkanban-layout-controller").width()-$("#"+a+" .tkanban-border-controler").width())/100;$("#"+a+" .tkanban-border-controler").css({left:c})});$("#"+a+" .tkanban-border-controler").on("mousedown",c=>{b=!0});$("#"+a+" .tkanban-border-controler").on("mouseleave",()=>{b=!1});$("#"+a+" .tkanban-border-controler").on("mouseup",
()=>{b=!1});$("#"+a+" .tkanban-border-controler").on("mousemove",c=>{b&&(c.preventDefault(),c=(document.querySelector("#"+a+" .tkanban-border-controler").offsetLeft-3)/($("#"+a+" #tkanban-layout-controller").width()-$("#"+a+" .tkanban-border-controler").width()),c=(document.querySelector("#"+a+" .tkanban-border-controler").offsetLeft+(-3+6*c))*10,$("#"+a).closest(".kanban-board-wrapper")[0].scroll({top:0,left:c,behavior:"instant"}))});$("#"+a+" .tkanban-border-controler").draggable({axis:"x",cursor:"move",
containment:"parent"});$(window).resize(function(){if($("#"+a).length>0){let c=$("#"+a+" #tkanban-layout-controller").width()-($("#"+a+" .tkanban-border-controler").position().left+$("#"+a+" .tkanban-border-controler").width()-5);c<0&&$("#"+a+" .tkanban-border-controler").css("left",$("#"+a+" .tkanban-border-controler").position().left+c);tkanban_resize_border_controler(a)}});tkanban_resize_border_controler(a)}
function tkanban_resize_border_controler(a){setTimeout(function(){var b=($(".sidebar").width()??0+$(".master-menu-content").width()??0)/10,c=parseFloat($(".sidebar").css("margin-left")??0)/10;b+=c;$("#"+a+" .tkanban-border-controler").width(`calc( 10vw - ${b}px )`)},0)}
function tkanban_add_item(a,b,c){a=$("[stage_id="+b+"] [item_id="+a+"]");a.length>0?a.replaceWith(base64_decode(c)):(a=parseInt($("[stage_id="+b+"].kanban-item-wrapper").data("count")),$("[stage_id="+b+"].kanban-item-wrapper").data("count",++a),$("[stage_id="+b+"].kanban-item-wrapper").append(base64_decode(c)))};function tchecklist_row_enable_check(a){$("table#"+a+" tbody tr").click(function(b){var c=$(this).find("[type=checkbox]:first");if($(b.target).is(":input")&&$(b.target).attr("id")!=c.attr("id")||$(b.target).closest(".tcheckgroup_label").length>0)return!0;b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();b=$(c).is(":checked");$(c).prop("checked",!b);b?$(this).removeClass("selected"):$(this).addClass("selected");tchecklist_fire_onselect($("table#"+a))});$("table#"+a+" tbody tr").each(function(){$(this).find("[type=checkbox]:first").click(function(b){b.stopPropagation();
b=$(this).is(":checked");var c=$(this).closest("tr");b?$(c).addClass("selected"):$(c).removeClass("selected");tchecklist_fire_onselect($("table#"+a))})})}
function tchecklist_fire_onselect(a){var b=a.attr("onselect");if(b){var c=a.attr("name"),e=[];a.find("tr.selected").each(function(){e.push($(this).find('input[type="checkbox"]:first'))});var k={};k[c]=[];e.each(function(d,f){d=$(f).attr("name");d=d.replace("check_"+c+"_","");k[c].push(base64_decode(d))});__adianti_post_exec(b,k,null,void 0,"1")}}
function tchecklist_select_all(a,b){$("table#"+b+" tbody tr:visible").each(function(){var c=$(this),e=c.find('input[type="checkbox"]:first');!a.checked&&e.is(":checked")?($(e).prop("checked",!1),$(c).removeClass("selected")):a.checked&&!e.is(":checked")&&($(e).prop("checked",!0),$(c).addClass("selected"))});tchecklist_fire_onselect($("table#"+b))}
function tchecklist_enable_field(a){try{$('table.tchecklist[name="'+a+'"]').length>0&&$('table.tchecklist[name="'+a+'"]').parent().find(".tchecklist-disable").remove()}catch(b){console.log(b)}}function tchecklist_disable_field(a){try{$('table.tchecklist[name="'+a+'"]').length>0&&$('table.tchecklist[name="'+a+'"]').parent().prepend('<div class="tchecklist-disable"></div>')}catch(b){console.log(b)}};var tbarcodeinputreader,tbarcodeinputreader_receive;
function tbarcodeinputreader_open_reader(a){var b=a+"_reader",c=a+"_container",e=$(window).width()*.9,k=$(window).height()*.8,d=document.createElement("div"),f=document.createElement("div"),l=document.createElement("video");d.title="Barcode";d.id=c;l.id=b;f.id=b+"-cameras";d.setAttribute("class","tbarcodeinputreader_container");l.setAttribute("class","tbarcodeinputreader_reader");f.setAttribute("class","tbarcodeinputreader-cameras");d.appendChild(l);d.appendChild(f);$("#adianti_div_content").append(d);
tbarcodeinputreader_start(b,function(){tjquerydialog_start("#"+c,!0,!1,!1,e,k,0,0,99999,[],function(){tbarcodeinputreader.closing=!0;tbarcodeinputreader_stop()},!0,"")},function(p){__adianti_block_ui();$("#"+a).val(p);tbarcodeinputreader_stop();typeof $("#"+a).attr("changeaction")!=="undefined"&&Function($("#"+a).attr("changeaction"))();__adianti_unblock_ui()})}
function tbarcodeinputreader_start(a,b,c){tbarcodeinputreader=new ZXing.BrowserBarcodeReader;tbarcodeinputreader.closing=!1;tbarcodeinputreader._stopContinuousDecode=!1;tbarcodeinputreader_receive=c;tbarcodeinputreader.listVideoInputDevices().then(function(e){e&&e.length!=0&&(b(),e.length>1&&trbarcodeinputreader_make_radio_camera(a,e),tbarcodeinputreader_read(e[e.length-1].deviceId,a))}).catch(function(e){__adianti_error("Error",e)})}
function trbarcodeinputreader_make_radio_camera(a,b){for(var c=0;c<b.length;c++){var e=b[c],k=document.createElement("input"),d=document.createElement("label");k.id=e.deviceId;k.type="radio";k.name=a+"-camera";k.setAttribute("onchange","tbarcodeinputreader_restart('"+e.deviceId+"','"+a+"');");d.for=e.deviceId;d.appendChild(k);d.appendChild(document.createTextNode(e.label));c==b.length-1&&(k.checked=!0);$("#"+a+"-cameras").append(d)}}
function tbarcodeinputreader_stop(){tbarcodeinputreader_close()}function tbarcodeinputreader_close(){tbarcodeinputreader.reset();$(".tbarcodeinputreader_container").closest(".ui-dialog").remove();$(".tbarcodeinputreader_container").remove()}function tbarcodeinputreader_restart(a,b){tbarcodeinputreader.closing=!0;tbarcodeinputreader.reset();tbarcodeinputreader_read(a,b)}
function tbarcodeinputreader_read(a,b){tbarcodeinputreader.decodeOnceFromVideoDevice(a,b).then(function(c){tbarcodeinputreader_receive(c)}).catch(function(c){tbarcodeinputreader&&tbarcodeinputreader.closing||(tbarcodeinputreader_close(),__adianti_error("Error",c))})};var tqrcodeinputreader,tqrcodeinputreader_receive;
function tqrcodeinputreader_open_reader(a){var b=a+"_reader",c=a+"_container",e=$(window).width()*.9,k=$(window).height()*.8,d=document.createElement("div"),f=document.createElement("div"),l=document.createElement("div");d.title="QRCode";d.id=c;l.id=b;f.id=b+"-cameras";d.setAttribute("class","tqrcodeinputreader_container");l.setAttribute("class","tqrcodeinputreader_reader");f.setAttribute("class","tqrcodeinputreader-cameras");d.appendChild(l);d.appendChild(f);$("#adianti_div_content").append(d);tqrcodeinputreader_start(b,
function(){tjquerydialog_start("#"+c,!0,!1,!1,e,k,0,0,99999,[],tqrcodeinputreader_stop,!0,"")},function(p){__adianti_block_ui();$("#"+a).val(p);tqrcodeinputreader_stop();typeof $("#"+a).attr("changeaction")!=="undefined"&&Function($("#"+a).attr("changeaction"))();__adianti_unblock_ui()})}
function tqrcodeinputreader_start(a,b,c){tqrcodeinputreader=new Html5Qrcode(a);tqrcodeinputreader_receive=c;Html5Qrcode.getCameras().then(function(e){e&&e.length!=0&&(b(),e.length>1&&trqcodeinputreader_make_radio_camera(a,e),tqrcodeinputreader_read(e[e.length-1].id))}).catch(function(e){__adianti_error("Error",e)})}
function trqcodeinputreader_make_radio_camera(a,b){for(var c=0;c<b.length;c++){var e=b[c],k=document.createElement("input"),d=document.createElement("label");k.id=e.id;k.type="radio";k.name=a+"-camera";k.setAttribute("onchange","tqrcodeinputreader_restart('"+e.id+"');");d.for=e.id;d.appendChild(k);d.appendChild(document.createTextNode(e.label));c==b.length-1&&(k.checked=!0);$("#"+a+"-cameras").append(d)}}
function tqrcodeinputreader_stop(){tqrcodeinputreader&&tqrcodeinputreader._isScanning?tqrcodeinputreader.stop().then(function(){tqrcodeinputreader_close()}).catch(function(a){__adianti_error("Error",a)}):tqrcodeinputreader_close()}function tqrcodeinputreader_close(){$(".tqrcodeinputreader_container").closest(".ui-dialog").remove();$(".tqrcodeinputreader_container").remove();tqrcodeinputreader=null}
function tqrcodeinputreader_restart(a){tqrcodeinputreader.stop().then(function(){tqrcodeinputreader_read(a)}).catch(function(b){__adianti_error("Error",b)})}function tqrcodeinputreader_read(a){tqrcodeinputreader.start(a,{qrbox:$("#"+tqrcodeinputreader._elementId).width()*.75},function(b){tqrcodeinputreader_receive(b)},function(b){}).catch(function(b){__adianti_error("Error",b)})};var TImageCropper=function(a,b,c,e,k,d,f,l,p,h){this.cropper;this.url;this.name=p;this.type=h;this.fileHandling=k;this.serviceAction=e;this.field=a;this.title=b;this.buttonLabel=c;this.config=l;this.base64=d;this.webcam=f;this.file_input_hidden=$("input[name="+a+"]");this.file=$("#tfile_timagecropper_"+a);this.image=$("#timagecropper_"+a);this.actions=$("#timagecropper_"+a+"+div.timagecropper_actions");this.placeholder=this.actions.parent().find(".placeholder");this.edit=this.actions.find("[action=edit]");
this.remove=this.actions.find("[action=remove]");this.file.click(function(t){if(f&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){t.preventDefault();var r=document.createElement("div");r.id="webcam_"+p.replace(".","");r.title="WebCam";$(r).addClass("timagecropper_webcam");$("#adianti_div_content").append(r);t=$(window).height()*.75;var x=t/3*4;Webcam.set({image_format:"png",width:x,height:t,dest_width:x,dest_height:t,constraints:{}});Webcam.off("error");
Webcam.on("error",function(y){y.name=="FlashError"||y.name=="WebcamError"?__adianti_error("Error",y.message):__adianti_error("Error","Could not access webcam: "+y.message)});tjquerydialog_start("#"+r.id,!0,!0,!1,x,t,0,0,2050,[{text:"Capturar",click:function(){Webcam.snap(function(y){y=w(y);var C=r.id;Webcam.reset();$("#"+C).remove();m(null,[y])})}}],function(){var y=r.id;Webcam.reset();$("#"+y).remove()},!0,"");setTimeout(function(){Webcam.attach("#"+r.id)},500)}});this.dropzone=$("#timagecropper_container_"+
a);this.dropzone.on("drag dragstart dragend dragover dragenter dragleave drop",function(t){t.preventDefault();t.stopPropagation()});this.dropzone.on("dragover dragenter",function(){$("#timagecropper_container_"+a).addClass("highlight")});this.dropzone.on("dragleave dragend drop",function(){$("#timagecropper_container_"+a).removeClass("highlight")});var g=this,m=function(t,r){__adianti_block_ui();(t=r||t.target.files||t.originalEvent.dataTransfer.files)&&t.length>0&&(t=t[0],g.name=t.name,g.type=t.type,
q(t));__adianti_unblock_ui()},q=function(t){URL?(g.url=URL.createObjectURL(t),v()):FileReader&&(reader=new FileReader,reader.onload=function(r){g.url=reader.result;v()},reader.readAsDataURL(t))},v=function(){__adianti_block_ui();var t=document.createElement("div"),r=document.createElement("div"),x=document.createElement("div"),y=document.createElement("div"),C=document.createElement("img"),F=$(window).width()*.95,H=$(window).height()*.9;C.src=g.url;C.id="timgagecropper_image_"+g.field;t.title=g.title;
t.id="container_timgagecropper_image_"+g.field;x.appendChild(y);r.appendChild(C);r.appendChild(x);t.appendChild(r);if($(window).width()<540)var D=F-30,I=H-200;else D=F-100,I=H-130;r.setAttribute("style","width: "+D+"px; height: "+I+"px");C.setAttribute("class","img_timagecrroper");r.setAttribute("class","container_timagecrroper");x.setAttribute("class","actions_timagecrroper");x.setAttribute("class","actions_timagecrroper");g.config.enableButtonDrag&&(r=y.appendChild,x=L(),C=M(),D=document.createElement("div"),
D.appendChild(x),D.appendChild(C),r.call(y,D));g.config.enableButtonScale&&(r=y.appendChild,x=G(),C=N(),D=document.createElement("div"),D.appendChild(x),D.appendChild(C),r.call(y,D));g.config.enableButtonZoom&&(r=y.appendChild,x=O(),C=P(),D=document.createElement("div"),D.appendChild(x),D.appendChild(C),r.call(y,D));g.config.enableButtonRotate&&(r=y.appendChild,x=Q(),C=R(),D=document.createElement("div"),D.appendChild(C),D.appendChild(x),r.call(y,D));g.config.enableButtonRotate&&y.appendChild(B());
$("#adianti_div_content").append(t);tjquerydialog_start("#"+t.id,!0,!1,!1,F,H,0,0,2050,[{text:g.buttonLabel,click:u}],null,!0,"");t=$("#timgagecropper_image_"+g.field)[0];y={viewMode:0,highlight:!0,rotatable:!0,responsive:!0,restore:!0,modal:!0,guides:!0};g.config.aspectRatio&&(y.aspectRatio=g.config.aspectRatio);g.cropper=new Cropper(t,y);__adianti_unblock_ui()},w=function(t){t=t.split(",");t=atob(t[1]);for(var r=t.length,x=new Uint8Array(r);r--;)x[r]=t.charCodeAt(r);return new File([x],g.name?g.name:
"image"+Math.floor(Math.random()*1E6+1)+".png",{type:g.type?g.type:"image/png"})},u=function(){__adianti_block_ui();var t=g.cropper.getCroppedCanvas({width:g.config.cropWidth,heigth:g.config.cropHeight}).toDataURL(g.type);$("#timagecropper_"+g.field).attr("src",t);$("#timagecropper_"+g.field).show();g.actions.show();g.placeholder.hide();if(g.base64)g.file_input_hidden.val(t),__adianti_unblock_ui();else try{var r=w(t),x=new FormData;x.append("fileName",r);var y=new XMLHttpRequest;y.open("POST",g.serviceAction,
!0);y.addEventListener("readystatechange",z,!1);y.send(x);if(g.fileHandling){var C=E();C.fileName&&C.fileName!=C.newFile&&(C.delFile=C.fileName);C.newFile="tmp/"+g.name;C.fileName="tmp/"+g.name;A(C)}else g.file_input_hidden.val(g.name)}catch(F){__adianti_error("Error",F),__adianti_unblock_ui()}$("#container_timgagecropper_image_"+g.field).closest(".ui-dialog").remove();$("#container_timgagecropper_image_"+g.field).remove();g.cropper.destroy()},z=function(t){var r=null;try{r=t.target.status}catch(C){__adianti_unblock_ui();
return}if(r=="200"&&t.target.readyState=="4"&&t.target.responseText)try{__adianti_unblock_ui();var x=JSON.parse(t.target.responseText);x.type=="error"&&__adianti_error("Error",x.msg);if(g.fileHandling){var y=E();y.fileName&&y.fileName!=y.newFile&&(y.delFile=y.fileName);y.newFile="tmp/"+x.fileName;y.fileName="tmp/"+x.fileName;A(y)}else g.file_input_hidden.val(g.name)}catch(C){__adianti_unblock_ui(),__adianti_error("Error",C)}},A=function(t){t?$(g.file_input_hidden).val(encodeURIComponent(JSON.stringify(t))):
$(g.file_input_hidden).val("")};g.sendData=A;var E=function(){var t=decodeURIComponent(g.file_input_hidden.val()),r="";try{r=t?JSON.parse(t):{}}catch(x){r={}}return r},B=function(){var t=document.createElement("i"),r=document.createElement("button");r.setAttribute("class","btn btn-default");t.setAttribute("class","fa fa-sync-alt");r.setAttribute("title",g.config.labels.reset);r.addEventListener("click",function(){g.cropper.reset()});r.addEventListener("touchstart",function(){g.cropper.reset()});r.appendChild(t);
return r},G=function(){var t=document.createElement("i"),r=document.createElement("button");r.setAttribute("class","btn btn-default");t.setAttribute("class","fa fa-arrows-alt-h");r.setAttribute("title",g.config.labels.scalex);r.setAttribute("data-option","-1");r.addEventListener("click",function(){J(this)});r.addEventListener("touchstart",function(){J(this)});r.appendChild(t);return r},N=function(){var t=document.createElement("i"),r=document.createElement("button");r.setAttribute("class","btn btn-default");
t.setAttribute("class","fa fa-arrows-alt-v");r.setAttribute("title",g.config.labels.scaley);r.setAttribute("data-option","-1");r.addEventListener("click",function(){K(this)});r.addEventListener("touchstart",function(){K(this)});r.appendChild(t);return r},J=function(t){var r=t.getAttribute("data-option");g.cropper.scaleX(r);t.setAttribute("data-option",r*-1)},K=function(t){var r=t.getAttribute("data-option");g.cropper.scaleY(r);t.setAttribute("data-option",r*-1)},L=function(){var t=document.createElement("i"),
r=document.createElement("button");r.setAttribute("class","btn btn-default");t.setAttribute("class","fa fa-arrows-alt");r.setAttribute("title",g.config.labels.move);r.addEventListener("click",function(){g.cropper.setDragMode("move")});r.addEventListener("touchstart",function(){g.cropper.setDragMode("move")});r.appendChild(t);return r},M=function(){var t=document.createElement("i"),r=document.createElement("button");r.setAttribute("class","btn btn-default");t.setAttribute("class","fa fa-crop-alt");
r.setAttribute("title",g.config.labels.crop);r.addEventListener("click",function(){g.cropper.setDragMode("crop")});r.addEventListener("touchstart",function(){g.cropper.setDragMode("crop")});r.appendChild(t);return r},O=function(){var t=document.createElement("i"),r=document.createElement("button");r.setAttribute("class","btn btn-default");t.setAttribute("class","fa fa-search-plus");r.setAttribute("title",g.config.labels.zoomin);r.addEventListener("click",function(){g.cropper.zoom(.1)});r.addEventListener("touchstart",
function(){g.cropper.zoom(.1)});r.appendChild(t);return r},P=function(){var t=document.createElement("i"),r=document.createElement("button");r.setAttribute("class","btn btn-default");t.setAttribute("class","fa fa-search-minus");r.setAttribute("title",g.config.labels.zoomout);r.addEventListener("click",function(){g.cropper.zoom(-.1)});r.addEventListener("touchstart",function(){g.cropper.zoom(-.1)});r.appendChild(t);return r},Q=function(){var t=document.createElement("i"),r=document.createElement("button");
r.setAttribute("class","btn btn-default");t.setAttribute("class","fa fa-redo-alt");r.setAttribute("title",g.config.labels.rotateright);r.addEventListener("click",function(){g.cropper.rotate(45)});r.addEventListener("touchstart",function(){g.cropper.rotate(45)});r.appendChild(t);return r},R=function(){var t=document.createElement("i"),r=document.createElement("button");r.setAttribute("class","btn btn-default");t.setAttribute("class","fa fa-undo-alt");r.setAttribute("title",g.config.labels.rotateleft);
r.setAttribute("data-option","-45");r.addEventListener("click",function(){g.cropper.rotate(-45)});r.addEventListener("touchstart",function(){g.cropper.rotate(-45)});r.appendChild(t);return r};this.clear=function(){this.actions.hide();this.image.hide();this.file_input_hidden.val("")};this.setValue=function(t){this.clear();if(t)if(this.fileHandling){var r={fileName:t};t.indexOf("%7B%")>=0&&(r=JSON.parse(decodeURIComponent(t)));this.image.attr("src","download.php?file="+r.fileName);this.image.show();
this.actions.show();this.sendData(r)}else this.file_input_hidden.val(t)};this.file.change(m);this.dropzone.on("drop",m);this.edit.click(function(t){__adianti_block_ui();g.url=g.image[0].src;v();__adianti_unblock_ui();t.preventDefault()});this.remove.click(function(t){var r=$("#timagecropper_"+g.field)[0];if(g.fileHandling){var x=E();x.delFile=x.fileName;x.fileName="";x.newFile="";x.delFile==x.newFile&&(x="");A(x);r.src=" "}else r=$("#timagecropper_"+g.field)[0],g.url=null,r.src=" ",A("");g.actions.hide();
g.placeholder.show();t.preventDefault()})};function timagecropper_start(a,b,c,e,k,d,f,l,p,h){b=new TImageCropper(a,b,c,e,k,d,f,l,p,h);$("input[name="+a+"]")[0].timagecropper=b};function tarrowstep_disable_field(a){$(`.arrow_steps_${a}`).addClass("disabled")}function tarrowstep_enable_field(a){$(`.arrow_steps_${a}`).removeClass("disabled")}function tarrowstep_clear(a){$(`.arrow_steps_${a} .step`).removeClass("current");$(`input[name='${a}']`).val("")}
function tarrowstep_set_current(a,b){$(`.arrow_steps_${a} .step`).removeClass("current");$(`input[name='${a}']`).val(b);var c=!0;$(`.arrow_steps_${a} .step`).each(function(e,k){c&&$(k).addClass("current");$(k).data("key")==b&&(c=!1)})}
function tarrowstep_start(a){$(`.arrow_steps_${a} .step`).on("click",function(){tarrowstep_set_current(a,$(this).data("key"))});$(`.arrow_steps_${a} .step`).on("mouseenter",function(){var b=$(this).data("key"),c=!0;$(`.arrow_steps_${a} .step`).each(function(e,k){c&&$(k).addClass("preview-current");$(k).data("key")==b&&(c=!1)})});$(`.arrow_steps_${a} .step`).on("mouseleave",function(){$(`.arrow_steps_${a} .step`).removeClass("preview-current")})};function tgantt_start(a,b,c,e,k){tgantt_set_height(a);$(a).data("pixelStep",e);$(a).data("minuteStep",c);$(a).data("lastHour",0);k&&tgantt_set_update_action(a,k);b&&tgantt_set_day_action(a,b)}
function tgantt_set_day_action(a,b){$(a+" .tgantt-event").on("click",function(c){c.stopPropagation();c.preventDefault();__adianti_load_page($(this).attr("href"))});$(a+" .tgantt-cell").on("click",function(){var c=$(this).closest("tr").data();__adianti_load_page(b+"&start_time="+$(this).data("date")+"&group_id="+c.id)})}function tgantt_format_date(a){return moment(a).format("YYYY-MM-DD HH:mm:ss")}
function tgantt_set_update_action(a,b){var c=$(a).data("pixelStep");$(a+" .tgantt-event").draggable({addClasses:!1,delay:50,axis:"x",grid:[c,100],drag:function(e,k){tgantt_update_data_title(a,k)},stop:function(e,k){e.stopPropagation();if(k.position.left<0){var d=k.helper.width();e=Math.abs(k.position.left);var f=parseInt(k.helper.css("margin-left"));d+(f-e)<=c&&(e=(f+d)*-1+parseFloat(c),k.helper.css("left",e+"px"),k.position.left=e)}else d=k.helper.parent().parent().width(),e=Math.abs(k.position.left),
k.helper.width(),f=parseInt(k.helper.css("margin-left")),e+f>=d&&(e=d-f-parseFloat(c),k.helper.css("left",e+"px"),k.position.left=e);d=tgantt_get_time_drag(a,k);e=JSON.parse(base64_decode(k.helper.attr("data")));var l=new Date(e.start_time);l.setTime(l.getTime()+d*60*60*1E3);f=new Date(e.end_time);f.setTime(f.getTime()+d*60*60*1E3);d=e.id;l=tgantt_format_date(l);f=tgantt_format_date(f);e.start_time=l;e.end_time=f;k.helper.attr("data",base64_encode(JSON.stringify(e)));__adianti_ajax_exec(b+"&id="+
d+"&key="+d+"&start_time="+l+"&end_time="+f)}}).resizable({addClasses:!1,delay:100,handles:"e,w",axis:"x",grid:[c,10],stop:function(e,k){e.stopPropagation();e.preventDefault();var d=$(this).data("ui-resizable").axis,f=d=="e"?$(this).data("ui-resizable").size.width-$(this).data("ui-resizable").originalSize.width>0?"right":"left":$(this).data("ui-resizable").size.width-$(this).data("ui-resizable").originalSize.width<0?"right":"left",l=tgantt_get_time_resize(a,k);e=JSON.parse(base64_decode(k.helper.attr("data")));
var p=e.id;d=="w"?(d=new Date(e.start_time),f=="left"?d.setTime(d.getTime()-Math.abs(l)*60*60*1E3):d.setTime(d.getTime()+Math.abs(l)*60*60*1E3),f=tgantt_format_date(d),l=e.end_time):(d=new Date(e.end_time),f=="left"?d.setTime(d.getTime()-Math.abs(l)*60*60*1E3):d.setTime(d.getTime()+Math.abs(l)*60*60*1E3),f=e.start_time,l=tgantt_format_date(d));e.start_time=f;e.end_time=l;k.helper.attr("data",base64_encode(JSON.stringify(e)));__adianti_ajax_exec(b+"&id="+p+"&key="+p+"&start_time="+f+"&end_time="+l)}})}
function tgantt_update_data_title(a,b){if($(".tooltip").length<1)return!1;b=tgantt_get_time_drag(b);var c=$(".tooltip"),e=c.position().left,k=$(a).data("lastHour"),d=$(a).data("pixelStep");if(k==b)return!1;b>k?c.css("left",e+parseInt(d)+"px"):c.css("left",e-d+"px");$(a).data("lastHour",b)}function tgantt_set_height(a){let b=[];$(a+" .table-content tr").each(function(){b.push($(this).outerHeight())});b.reverse();$(a+" .table-rows tr").each(function(){$(this).outerHeight(b.pop())})}
function tgantt_get_steps(a){return a.position.left-a.originalPosition.left}function tgantt_get_time_drag(a,b){b=tgantt_get_steps(b);var c=$(a).data("pixelStep");a=$(a).data("minuteStep");return b==0?0:b/c*a/60}function tgantt_get_time_resize(a,b){var c=tgantt_get_time_drag(a,b),e=$(a).data("pixelStep");a=$(a).data("minuteStep");if(c!=0)return c;b=b.size.width-b.originalSize.width;return b==0?0:b/e*a/60};Adianti.translation={en:{large_file:"The file is too large. The upload limit is ",success:"Success",file_uploaded_successfully:"File uploaded successfully"},pt:{large_file:"O arquivo \u00e9 muito grande. O limite de carregamento \u00e9 ",success:"Sucesso",file_uploaded_successfully:"Arquivo carregado com sucesso"},es:{large_file:"El archivo es demasiado grande. El l\u00edmite de carga es ",success:"\u00c9xito",file_uploaded_successfully:"Archivo cargado con \u00e9xito"}};
function _t(a){return Adianti.translation[Adianti.language][a]??a};function bimagecarousel_start(a,b,c,e){setTimeout(function(){var k=new Splide("#"+a,b);if(c){var d=new Splide("#"+c,e);k.sync(d)}k.mount();c&&d.mount()},10)};function bselectcheck_start(a,b){function c(l){const p=l.data("select2").$dropdown;if(p&&p.length){p.find(".select2-results__option:visible").each(function(){var m=$(this).data("data");if(m&&m.id){m=l.find('option[value="'+m.id+'"]').prop("selected");const q=$(this).find(".select2-result-item__checkbox");q.length&&(q.prop("checked",m),$(this).attr("aria-selected",m?"true":"false"))}});var h=l.data("select2");if(h&&h.data&&h.data()){h=h.data();for(let m=0;m<h.length;m++){var g=h[m];if(g&&g.id){const q=
l.find('option[value="'+g.id+'"]').prop("selected");g=p.find(`.select2-results__option[aria-selected][id$="-${g.id}"]`);g.length&&(g.find(".select2-result-item__checkbox").prop("checked",q),g.attr("aria-selected",q?"true":"false"))}}}}}let e=!1;var k={allowClear:!0,multiple:!0,closeOnSelect:!1,placeholder:b,templateSelection:function(l,p){return l.text},templateResult:function(l){if(l.loading)return l.text;var p=$('<div class="select2-result-item">'+(l.element.tagName==="OPTGROUP"?"":'<input type="checkbox" class="select2-result-item__checkbox">')+
'<span class="select2-result-item__text">'+l.text+"</span></div>");l.element.tagName!=="OPTGROUP"&&l.id&&p.find('input[type="checkbox"]').attr("data-option-value",l.id);l=$(l.element).is(":selected");p.find('input[type="checkbox"]').prop("checked",l);return p}};$(a).removeAttr("onchange");const d=$(a).select2(k);d.data("original-element",a);d.on("change.internalupdate",function(l){bselectcheck_update_summary(this,b);e||setTimeout(function(){c(d)},10)});d.on("select2:close",function(){$(a).attr("changeaction")&&
(new Function($(a).attr("changeaction")))()});d.on("select2:open",function(){setTimeout(function(){c(d)},50)});d.on("select2:select select2:unselect",function(){setTimeout(function(){c(d)},10)});const f=function(){const l=d.data("select2").$dropdown;l.is(":visible")&&l.find(".select2-results__option").each(function(){var p=$(this).data("data")?.id;if(p){p=d.find('option[value="'+p+'"]').prop("selected");const h=$(this).find('input[type="checkbox"]');h.prop("checked")!==p&&(h.prop("checked",p),$(this).attr("aria-selected",
p?"true":"false"))}})};d.on("select2:rendered",function(){f()});d.on("mouseup",".select2-results__option",function(){$(this).data("data");setTimeout(function(){f()},50)});d.on("select2:unselecting",function(l){$(this).data("unselecting",!0);setTimeout(()=>$(this).removeData("unselecting"),10)}).on("select2:opening",function(l){$(this).data("unselecting")&&($(this).removeData("unselecting"),l.preventDefault())});d.on("select2:clearing",function(l){var p=$(this).next(".select2-container");setTimeout(function(){p.find(".select2-selection__rendered").html('<li class="select2-selection__placeholder">'+
b+"</li>")})});$(document).off("click",".select2-results__option, .select2-result-item__checkbox").on("click",".select2-results__option, .select2-result-item__checkbox",function(l){const p=$(l.target).hasClass("select2-result-item__checkbox")?$(this).closest(".select2-results__option"):$(this);l.preventDefault();l.stopPropagation();if(!p.data("data"))return!1;l=p.data("data").id;const h=p.closest(".select2-results").siblings(".select2-search--dropdown").closest(".select2-container").siblings("select");
if(!h.length)return!1;var g=h.find(`option[value="${l}"]`).prop("selected");e=!0;try{g=!g,h.find(`option[value="${l}"]`).prop("selected",g),p.find(".select2-result-item__checkbox").prop("checked",g),p.attr("aria-selected",g?"true":"false"),h.trigger("change"),bselectcheck_update_summary(h,b)}finally{e=!1}return!1});$(document).off("click",".select2-selection").on("click",".select2-selection",function(l){const p=$(this).closest(".select2-container").siblings("select");p.length&&setTimeout(function(){p.select2("open")},
10)});k=$(a).next(".select2-container");k.find(".select2-selection__arrow").length||k.find(".select2-selection").append('<span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>');d.data("select2").$dropdown.addClass("bselectcheck");d.data("select2").$container.addClass("bselectcheck-container");bselectcheck_update_summary(a,b);d.on("select2:open",function(){const l=d.data("select2").$dropdown;var p=$(this).next(".select2-container").outerWidth();l.css("width",
p+"px");l.find(".bselectcheck-custom-dropdown-header").remove();var h=$('<input type="text" class="bselectcheck-custom-search-input">'),g=$('<div class="bselectcheck-buttons-container"></div>');p=$('<span  class="bselectcheck-btn btn btn-default btn-sm pull-left"> <i class="far fa-check-square" style=";padding-right:4px"></i> </button>');var m=$('<span  class="bselectcheck-btn btn btn-default btn-sm pull-left"><i class="far fa-square" style=";padding-right:4px"></i></button>'),q=$('<span  class="bselectcheck-btn btn btn-default btn-sm pull-left"><i class="fas fa-retweet" style=";padding-right:4px"></i></button>');
g.append(p,m,q);g=$('<div class="bselectcheck-custom-dropdown-header"></div>').append(h).append(g);l.prepend(g);p.on("click",function(v){v.preventDefault();v.stopPropagation();e=!0;try{d.find("option").prop("selected",!0),d.data("select2").$dropdown.find(".select2-results__option:visible").each(function(){$(this).attr("aria-selected","true");$(this).find(".select2-result-item__checkbox").prop("checked",!0)}),d.trigger("change"),bselectcheck_update_summary(d,b),setTimeout(function(){c(d)},50)}finally{e=
!1}});m.on("click",function(v){v.preventDefault();v.stopPropagation();e=!0;try{d.find("option").prop("selected",!1),d.data("select2").$dropdown.find(".select2-results__option:visible").each(function(){$(this).attr("aria-selected","false");$(this).find(".select2-result-item__checkbox").prop("checked",!1)}),d.trigger("change"),bselectcheck_update_summary(d,b),setTimeout(function(){c(d)},50)}finally{e=!1}});q.off("click").on("click",function(v){v.preventDefault();v.stopPropagation();e=!0;try{const u=
d.data("select2").$dropdown;if(u&&u.length!==0){var w=u.find(".select2-results__option:visible .select2-result-item__checkbox[data-option-value]");w.length!==0&&(w.each(function(z){if(z=$(this).attr("data-option-value"))if(z=d.find(`option[value="${z}"]`),z.length!==0){var A=!z.prop("selected");z.prop("selected",A);$(this).prop("checked",A);$(this).closest(".select2-results__option").attr("aria-selected",A?"true":"false")}}),d.trigger("change"),bselectcheck_update_summary(d,b),setTimeout(function(){c(d)},
100))}}catch(u){console.error("ERRO DURANTE INVERS\u00c3O:",u)}finally{e=!1}});setTimeout(function(){c(d)},100);h.on("input",function(){var v=$(this).val().toLowerCase();l.find(".select2-results__options li").each(function(){$(this).hasClass("select2-results__message")||($(this).text().toLowerCase().includes(v)?$(this).show():$(this).hide())})});setTimeout(function(){h.focus()},0)});d.on("select2:select select2:unselect",function(l){var p=l.params.data.selected;typeof l.params.originalEvent!="undefined"&&
$(l.params.originalEvent.currentTarget).find('input[type="checkbox"]').prop("checked",p);d.find('option[value="'+l.params.data.id+'"]').prop("selected");setTimeout(function(){d.data("select2").$dropdown.find(".select2-results__option").each(function(){var h=$(this).data("data")?.id;h&&(h=d.find('option[value="'+h+'"]').prop("selected"),$(this).find('input[type="checkbox"]').prop("checked",h),$(this).attr("aria-selected",h?"true":"false"))})},10)});d.on("select2:clearing",function(l){var p=$(this).next(".select2-container");
setTimeout(function(){p.find(".select2-selection__rendered").html('<li class="select2-selection__placeholder">'+b+"</li>")})})}
function bselectcheck_update_summary(a,b){var c=$(a);a=c.select2("data");const e=a?.length,k=c.next(".select2-container");c=k.find(".select2-selection__rendered");if(e===0)c.find("li:not(.select2-search--inline)").remove(),c.find(".select2-selection__choice, .select2-selection__clear").remove(),c.prepend(`<li class="select2-selection__placeholder">${b}</li>`);else{const {visibleText:d,remainingCount:f}=bselectcheck_calculate_visible_items(k,a);b=d;f>0&&(b+=` (+${f} itens)`);c.find("li:not(.select2-search--inline)").remove();
c.prepend(`<span style="width: 100%;max-width: 100%;"class="select2-selection__choice">${b}</span>`)}}
function bselectcheck_calculate_visible_items(a,b){const c=$("<span>").css({"font-size":a.css("font-size"),"font-family":a.css("font-family"),visibility:"hidden",position:"absolute","white-space":"nowrap"}).appendTo("body");a=a.width()-80;let e=[],k=0;b=b?.filter(d=>d&&d.text?.trim());for(let d=0;d<b?.length;d++){const f=e.length===0?b[d].text.trim():e.join(", ")+", "+b[d].text.trim();c.text(d<b.length-1?f+` (+${b.length-d-1} itens)`:f);if(a<c.width()){k=b.length-d;break}e.push(b[d].text.trim())}c.remove();
return{visibleText:e.length>0?e.join(", "):"",remainingCount:k}};
